{"generatedAt":1668783381048,"generateTime":38,"contents":[{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Welcome","description":"Supercharging the Nuxt3 developer experience with high quality modules and tools!","excerpt":{"type":"root","children":[{"type":"element","tag":"block-hero","props":{":cta":"[\"Get started →\",\"/guide/welcome\"]",":secondary":"[\"★ Star on GitHub\",\"https://github.com/sidebase/nuxt-auth\"]","snippet":"npm install -D @sidebase/nuxt-auth"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"announcement-button","props":{"label":"We just released version 0.1.0 of nuxt-auth!","to":"https://github.com/sidebase/nuxt-auth/releases"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Authentication made easy for Nuxt3!"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt user authentication and sessions via "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/","rel":["nofollow"]},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":". nuxt-auth wraps NextAuth.js to offer the reliability & convenience of a 12k star library to the nuxt 3 ecosystem with a native developer experience."}]}]},{"type":"element","tag":"template","props":{"v-slot:extra":""},"children":[{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Nuxt3 ready"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TypeScript support"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Based on "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/","rel":["nofollow"]},"children":[{"type":"text","value":"NextAuth"}]}]}]}]}]}]},{"type":"element","tag":"card-grid","props":{},"children":[{"type":"element","tag":"card","props":{"icon":"heroicons-outline:users"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Countless providers"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By using NextAuth we already support most oAuth providers out of the box!"}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:globe-alt"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Universal Auth Composable"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We integrate NextAuth directly into Vue, giving you access to authentication data and functions in your app!"}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:document"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Persistent sessions across requests"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-session"}]},{"type":"text","value":" your users will not have to sign in every time they access your page."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:shield-check"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application-side middleware protection"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Protect selected pages or your entire app through Nuxt3 middleware."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:server-stack"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Server-side middleware and endpoint protection"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Protect the content on your website. Your NodeJS server will automatically check users' status in the backend."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:rectangle-stack"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"REST-API"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Want to do it yourself? We offer a full REST-API with all the endpoints you need!"}]}]}]}]}]},"navigation":false,"layout":"page","body":{"type":"root","children":[{"type":"element","tag":"block-hero","props":{":cta":"[\"Get started →\",\"/guide/welcome\"]",":secondary":"[\"★ Star on GitHub\",\"https://github.com/sidebase/nuxt-auth\"]","snippet":"npm install -D @sidebase/nuxt-auth"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"announcement-button","props":{"label":"We just released version 0.1.0 of nuxt-auth!","to":"https://github.com/sidebase/nuxt-auth/releases"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Authentication made easy for Nuxt3!"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt user authentication and sessions via "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/","rel":["nofollow"]},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":". nuxt-auth wraps NextAuth.js to offer the reliability & convenience of a 12k star library to the nuxt 3 ecosystem with a native developer experience."}]}]},{"type":"element","tag":"template","props":{"v-slot:extra":""},"children":[{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Nuxt3 ready"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"TypeScript support"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Based on "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/","rel":["nofollow"]},"children":[{"type":"text","value":"NextAuth"}]}]}]}]}]}]},{"type":"element","tag":"card-grid","props":{},"children":[{"type":"element","tag":"card","props":{"icon":"heroicons-outline:users"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Countless providers"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By using NextAuth we already support most oAuth providers out of the box!"}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:globe-alt"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Universal Auth Composable"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We integrate NextAuth directly into Vue, giving you access to authentication data and functions in your app!"}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:document"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Persistent sessions across requests"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-session"}]},{"type":"text","value":" your users will not have to sign in every time they access your page."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:shield-check"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application-side middleware protection"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Protect selected pages or your entire app through Nuxt3 middleware."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:server-stack"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Server-side middleware and endpoint protection"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Protect the content on your website. Your NodeJS server will automatically check users' status in the backend."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:rectangle-stack"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"REST-API"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Want to do it yourself? We offer a full REST-API with all the endpoints you need!"}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:1.index.md","_source":"content","_file":"1.index.md","_extension":"md"},{"_path":"/guide/_dir","_dir":"guide","_draft":false,"_partial":true,"_locale":"en","title":"Guide","icon":"heroicons-outline:book-open","_id":"content:2.guide:_dir.yml","_type":"yaml","_source":"content","_file":"2.guide/_dir.yml","_extension":"yml"},{"_path":"/guide","_dir":"","_draft":false,"_partial":false,"_locale":"en","_empty":true,"title":"","description":"","excerpt":{"type":"root","children":[]},"redirect":"/guide/welcome","body":{"type":"root","children":[],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:1.index.md","_source":"content","_file":"2.guide/1.index.md","_extension":"md"},{"_path":"/guide/welcome/_dir","_dir":"welcome","_draft":false,"_partial":true,"_locale":"en","title":"Welcome","icon":"heroicons-outline:sparkles","_id":"content:2.guide:1.welcome:_dir.yml","_type":"yaml","_source":"content","_file":"2.guide/1.welcome/_dir.yml","_extension":"yml"},{"_path":"/guide/welcome","_dir":"guide","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Getting started","description":"Install the package:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install the package:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"npm i -D @sidebase/nuxt-auth\n","filename":"NPM","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm i -D @sidebase/nuxt-auth\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn add @sidebase/nuxt-auth --dev\n","filename":"Yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yarn add @sidebase/nuxt-auth --dev\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Add the package to your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\n   modules: ['@sidebase/nuxt-auth'],\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default defineNuxtConfig({\n   modules: ['@sidebase/nuxt-auth'],\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create the authentication handler ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":") and add at least one "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/providers/","rel":["nofollow"]},"children":[{"type":"text","value":"authentication provider"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\nimport GithubProvider from 'next-auth/providers/github'\n\nexport default NuxtAuthHandler({\n    providers: [\n        // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n        GithubProvider.default({\n           clientId: 'enter-your-client-id-here',\n           clientSecret: 'enter-your-client-secret-here'\n        })\n    ]\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\nimport GithubProvider from 'next-auth/providers/github'\n\nexport default NuxtAuthHandler({\n    providers: [\n        // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n        GithubProvider.default({\n           clientId: 'enter-your-client-id-here',\n           clientSecret: 'enter-your-client-secret-here'\n        })\n    ]\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Done! You can now use all user-related functionality, for example:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"// file: e.g ~/pages/login.vue\nconst { status, data, signIn, signOut } = await useSession({\n   // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n   required: true\n})\n\nstatus.value // Session status: `unauthenticated`, `loading`, `authenticated`\ndata.value // Session data, e.g., expiration, user.email, ...\n\nawait signIn() // Sign in the user\nawait signOut() // Sign out the user\n","filename":"Application side","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: e.g ~/pages/login.vue\nconst { status, data, signIn, signOut } = await useSession({\n   // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n   required: true\n})\n\nstatus.value // Session status: `unauthenticated`, `loading`, `authenticated`\ndata.value // Session data, e.g., expiration, user.email, ...\n\nawait signIn() // Sign in the user\nawait signOut() // Sign out the user\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"// file: e.g: ~/server/api/session.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n   const session = await getServerSession(event)\n   if (!session) {\n      return { status: 'unauthenticated!' }\n   }\n   return { status: 'authenticated!', text: 'im protected by an in-endpoint check', session }\n})\n","filename":"Server side","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: e.g: ~/server/api/session.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n   const session = await getServerSession(event)\n   if (!session) {\n      return { status: 'unauthenticated!' }\n   }\n   return { status: 'authenticated!', text: 'im protected by an in-endpoint check', session }\n})\n"}]}]}]}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There's more supported methods in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" composable, you can create "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/middleware","rel":["nofollow"]},"children":[{"type":"text","value":"universal-application-"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#server-middleware","rel":["nofollow"]},"children":[{"type":"text","value":"server-api-middleware"}]},{"type":"text","value":" that make use of the authentication status and more. All of this is "},{"type":"element","tag":"a","props":{"href":"/guide/usage"},"children":[{"type":"text","value":"documented here"}]},{"type":"text","value":"."}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install the package:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"npm i -D @sidebase/nuxt-auth\n","filename":"NPM","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"npm i -D @sidebase/nuxt-auth"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn add @sidebase/nuxt-auth --dev\n","filename":"Yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"yarn add @sidebase/nuxt-auth --dev"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Add the package to your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\n   modules: ['@sidebase/nuxt-auth'],\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bbaab"},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'@sidebase/nuxt-auth'"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create the authentication handler ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":") and add at least one "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/providers/","rel":["nofollow"]},"children":[{"type":"text","value":"authentication provider"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\nimport GithubProvider from 'next-auth/providers/github'\n\nexport default NuxtAuthHandler({\n    providers: [\n        // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n        GithubProvider.default({\n           clientId: 'enter-your-client-id-here',\n           clientSecret: 'enter-your-client-secret-here'\n        })\n    ]\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// file: ~/server/api/auth/[...].ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"GithubProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'next-auth/providers/github'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bbaab"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"providers"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":": ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b1e422"},"children":[{"type":"text","value":"GithubProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-4bbaab"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"           "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"clientId"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'enter-your-client-id-here'"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"           "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"clientSecret"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'enter-your-client-secret-here'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"        })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"    ]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Done! You can now use all user-related functionality, for example:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"// file: e.g ~/pages/login.vue\nconst { status, data, signIn, signOut } = await useSession({\n   // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n   required: true\n})\n\nstatus.value // Session status: `unauthenticated`, `loading`, `authenticated`\ndata.value // Session data, e.g., expiration, user.email, ...\n\nawait signIn() // Sign in the user\nawait signOut() // Sign out the user\n","filename":"Application side","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// file: e.g ~/pages/login.vue"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-b1e422"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b1e422"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b1e422"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-b1e422"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-e161a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bbaab"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"required"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-6ac71c"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1e422"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// Session status: `unauthenticated`, `loading`, `authenticated`"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1e422"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// Session data, e.g., expiration, user.email, ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bbaab"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// Sign in the user"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bbaab"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// Sign out the user"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"// file: e.g: ~/server/api/session.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n   const session = await getServerSession(event)\n   if (!session) {\n      return { status: 'unauthenticated!' }\n   }\n   return { status: 'authenticated!', text: 'im protected by an in-endpoint check', session }\n})\n","filename":"Server side","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ce94f"},"children":[{"type":"text","value":"// file: e.g: ~/server/api/session.get.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bbaab"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1e422"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e161a8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4bbaab"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e161a8"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'unauthenticated!'"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"   }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-ede8dc"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'authenticated!'"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8b5e15"},"children":[{"type":"text","value":"'im protected by an in-endpoint check'"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd889"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3a7221"},"children":[{"type":"text","value":"})"}]}]}]}]}]}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There's more supported methods in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" composable, you can create "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/middleware","rel":["nofollow"]},"children":[{"type":"text","value":"universal-application-"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#server-middleware","rel":["nofollow"]},"children":[{"type":"text","value":"server-api-middleware"}]},{"type":"text","value":" that make use of the authentication status and more. All of this is "},{"type":"element","tag":"a","props":{"href":"/guide/usage"},"children":[{"type":"text","value":"documented here"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-6ac71c{color:#D19A66}.ct-e161a8{color:#56B6C2}.ct-b1e422{color:#E5C07B}.ct-3ce94f{color:#7F848E}.ct-8b5e15{color:#98C379}.ct-2dd889{color:#E06C75}.ct-4bbaab{color:#61AFEF}.ct-ede8dc{color:#C678DD}.ct-3a7221{color:#ABB2BF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:1.welcome:1.index.md","_source":"content","_file":"2.guide/1.welcome/1.index.md","_extension":"md"},{"_path":"/guide/welcome/features","_dir":"welcome","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Features","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"features"},"children":[{"type":"text","value":"Features"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Authentication providers"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"OAuth (e.g., Github, Google, Twitter, Azure, ...)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Custom OAuth (write it yourself)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Credentials (password + username)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Isomorphic / Universal Auth Composable"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useSession composable to: signIn, signOut, getCsrfToken, getProviders, getSession"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"full typescript support for all methods and property"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Persistent sessions across requests"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Application-side middleware protection"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Server-side middleware and endpoint protection"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"REST API"}]}]}]},{"type":"element","tag":"list","props":{"type":"warning"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Email Magic URLs"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"features"},"children":[{"type":"text","value":"Features"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Authentication providers"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"OAuth (e.g., Github, Google, Twitter, Azure, ...)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Custom OAuth (write it yourself)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Credentials (password + username)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Isomorphic / Universal Auth Composable"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useSession composable to: signIn, signOut, getCsrfToken, getProviders, getSession"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"full typescript support for all methods and property"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Persistent sessions across requests"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Application-side middleware protection"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Server-side middleware and endpoint protection"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"REST API"}]}]}]},{"type":"element","tag":"list","props":{"type":"warning"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Email Magic URLs"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:1.welcome:2.features.md","_source":"content","_file":"2.guide/1.welcome/2.features.md","_extension":"md"},{"_path":"/guide/welcome/demo-page","_dir":"welcome","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Demo Page","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"demo-page"},"children":[{"type":"text","value":"Demo Page"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Visit the nuxt-auth "},{"type":"element","tag":"a","props":{"href":"https://nuxt-auth-example.sidebase.io/","rel":["nofollow"]},"children":[{"type":"text","value":"demo page here"}]},{"type":"text","value":":"}]}]},{"type":"element","tag":"alert","props":{"type":"success"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can find the "},{"type":"element","tag":"a","props":{"href":"https://github.com/sidebase/nuxt-auth-example","rel":["nofollow"]},"children":[{"type":"text","value":"demo source-code here"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"nuxt-auth demo page","src":"/nuxt-auth-example-preview.png"},"children":[]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"demo-page"},"children":[{"type":"text","value":"Demo Page"}]},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Visit the nuxt-auth "},{"type":"element","tag":"a","props":{"href":"https://nuxt-auth-example.sidebase.io/","rel":["nofollow"]},"children":[{"type":"text","value":"demo page here"}]},{"type":"text","value":":"}]}]},{"type":"element","tag":"alert","props":{"type":"success"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can find the "},{"type":"element","tag":"a","props":{"href":"https://github.com/sidebase/nuxt-auth-example","rel":["nofollow"]},"children":[{"type":"text","value":"demo source-code here"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"nuxt-auth demo page","src":"/nuxt-auth-example-preview.png"},"children":[]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:1.welcome:3.demo-page.md","_source":"content","_file":"2.guide/1.welcome/3.demo-page.md","_extension":"md"},{"_path":"/guide/welcome/security","_dir":"welcome","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Security","description":"This section mostly contains a list of possible security problems. Note that the below flaws exist with many libraries and frameworks we use in our day-to-day when building and working with APIs. Even your vanilla Nuxt app already possesses some of these shortcoming. Missing in the below list are estimates of how likely it is that one of the list-items may occur and what impact it will have on your app. This is because that heavily depends on:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"security"},"children":[{"type":"text","value":"Security"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This section mostly contains a list of possible security problems. Note that the below flaws exist with many libraries and frameworks we use in our day-to-day when building and working with APIs. Even your vanilla Nuxt app already possesses some of these shortcoming. Missing in the below list are estimates of how likely it is that one of the list-items may occur and what impact it will have on your app. This is because that heavily depends on:"}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"your app"}]},{"type":"text","value":": Are you building a fun project? A proof of concept? The next fort-nox money management app?"}]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"your environment"}]},{"type":"text","value":": Building a freely available app for fun? Have authentication in front of your app and trust all users that successfully authenticated? Superb! Don't trust anyone? Then please be extra-careful when using this library and when building you backend in general"}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Without further ado, here's some attack cases you can consider and take action against. Neither the attack vectors, the problems or the mitigations are exhaustive:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"sending arbitrary data: Denial-of-Service by server-ressource exhaustion (bandwidth, cpu, memory), arbitrary code execution (if you parse the data), ..."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"creation arbitrarily many sessions: Denial-of-Service by server-ressource exhaustion (bandwidth, cpu, memory)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"guessing correct session ids: session data can leak"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"stealing session id(s) of client(s): session data can leak"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Read up how to mitigate these and more issues if you see fit. Checkout the "},{"type":"element","tag":"a","props":{"href":"https://github.com/Baroshem/nuxt-security","rel":["nofollow"]},"children":[{"type":"text","value":"nuxt-security"}]},{"type":"text","value":" module that may help with some of these."}]},{"type":"element","tag":"h2","props":{"id":"disclosure"},"children":[{"type":"text","value":"Disclosure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A last reminder: This library was not written by crypto- or security-experts. Please proceed at your own risk, inspect the code if you want to and open issues / pull requests where you see room for improvement. If you want to file a security-concern privately, please send an email to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"support@sidestream.tech"}]},{"type":"text","value":" with the subject saying \"SECURITY nuxt-auth\" and we'll look into your request ASAP."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"security"},"children":[{"type":"text","value":"Security"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This section mostly contains a list of possible security problems. Note that the below flaws exist with many libraries and frameworks we use in our day-to-day when building and working with APIs. Even your vanilla Nuxt app already possesses some of these shortcoming. Missing in the below list are estimates of how likely it is that one of the list-items may occur and what impact it will have on your app. This is because that heavily depends on:"}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"your app"}]},{"type":"text","value":": Are you building a fun project? A proof of concept? The next fort-nox money management app?"}]}]},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"your environment"}]},{"type":"text","value":": Building a freely available app for fun? Have authentication in front of your app and trust all users that successfully authenticated? Superb! Don't trust anyone? Then please be extra-careful when using this library and when building you backend in general"}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Without further ado, here's some attack cases you can consider and take action against. Neither the attack vectors, the problems or the mitigations are exhaustive:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"sending arbitrary data: Denial-of-Service by server-ressource exhaustion (bandwidth, cpu, memory), arbitrary code execution (if you parse the data), ..."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"creation arbitrarily many sessions: Denial-of-Service by server-ressource exhaustion (bandwidth, cpu, memory)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"guessing correct session ids: session data can leak"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"stealing session id(s) of client(s): session data can leak"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Read up how to mitigate these and more issues if you see fit. Checkout the "},{"type":"element","tag":"a","props":{"href":"https://github.com/Baroshem/nuxt-security","rel":["nofollow"]},"children":[{"type":"text","value":"nuxt-security"}]},{"type":"text","value":" module that may help with some of these."}]},{"type":"element","tag":"h2","props":{"id":"disclosure"},"children":[{"type":"text","value":"Disclosure"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A last reminder: This library was not written by crypto- or security-experts. Please proceed at your own risk, inspect the code if you want to and open issues / pull requests where you see room for improvement. If you want to file a security-concern privately, please send an email to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"support@sidestream.tech"}]},{"type":"text","value":" with the subject saying \"SECURITY nuxt-auth\" and we'll look into your request ASAP."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"disclosure","depth":2,"text":"Disclosure"}]}},"_type":"markdown","_id":"content:2.guide:1.welcome:4.Security.md","_source":"content","_file":"2.guide/1.welcome/4.Security.md","_extension":"md"},{"_path":"/guide/configuration/_dir","_dir":"configuration","_draft":false,"_partial":true,"_locale":"en","title":"Configuration","icon":"heroicons-outline:cog","_id":"content:2.guide:2.configuration:_dir.yml","_type":"yaml","_source":"content","_file":"2.guide/2.configuration/_dir.yml","_extension":"yml"},{"_path":"/guide/configuration","_dir":"guide","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Glossary","description":"The nuxt-auth module takes care of authentication and sessions.\nThere are some terms we use in this documentation that may not immediately be known to every reader. Here is an explanation for some of them:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"glossary"},"children":[{"type":"text","value":"Glossary"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The nuxt-auth module takes care of authentication and sessions.\nThere are some terms we use in this documentation that may not immediately be known to every reader. Here is an explanation for some of them:"}]},{"type":"element","tag":"callout","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"authentication"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The process of ensuring that somebody is who they claims to be, e.g., via a username and password or by trusting an external authority (e.g., oauth via google, amazon, ...)"}]}]}]},{"type":"element","tag":"callout","props":{"type":"success"},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"sessions"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Persist the information that you have been authenticated for some duration across different requests. Additional data can be attached to a session, e.g., a username. (Note: If you need only sessions but no authentication, you can check-out nuxt-session)"}]}]}]},{"type":"element","tag":"callout","props":{"type":"warning"},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"application / application-side / universal-application"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This references all Nuxt code of your app that is universally rendered. In short this means that that code is rendered on the server-side and on the client-side, so all JS in it is executed twice. This is an important distinction, as some things may behave different on the server-side than on the client-side. We use application... to denote something that will be universally rendered"}]}]}]},{"type":"element","tag":"callout","props":{"type":"danger"},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"server / server-side"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This references all Nuxt code of your app that will run only on your server. For example, all code inside the ~/server directory should only ever run on the server"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"glossary"},"children":[{"type":"text","value":"Glossary"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The nuxt-auth module takes care of authentication and sessions.\nThere are some terms we use in this documentation that may not immediately be known to every reader. Here is an explanation for some of them:"}]},{"type":"element","tag":"callout","props":{},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"authentication"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The process of ensuring that somebody is who they claims to be, e.g., via a username and password or by trusting an external authority (e.g., oauth via google, amazon, ...)"}]}]}]},{"type":"element","tag":"callout","props":{"type":"success"},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"sessions"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Persist the information that you have been authenticated for some duration across different requests. Additional data can be attached to a session, e.g., a username. (Note: If you need only sessions but no authentication, you can check-out nuxt-session)"}]}]}]},{"type":"element","tag":"callout","props":{"type":"warning"},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"application / application-side / universal-application"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This references all Nuxt code of your app that is universally rendered. In short this means that that code is rendered on the server-side and on the client-side, so all JS in it is executed twice. This is an important distinction, as some things may behave different on the server-side than on the client-side. We use application... to denote something that will be universally rendered"}]}]}]},{"type":"element","tag":"callout","props":{"type":"danger"},"children":[{"type":"element","tag":"template","props":{"v-slot:summary":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"server / server-side"}]}]},{"type":"element","tag":"template","props":{"v-slot:content":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This references all Nuxt code of your app that will run only on your server. For example, all code inside the ~/server directory should only ever run on the server"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:2.configuration:0.index.md","_source":"content","_file":"2.guide/2.configuration/0.index.md","_extension":"md"},{"_path":"/guide/configuration/nuxt-config","_dir":"configuration","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Nuxt Config","description":"Learn how to configure nuxt-auth inside of the nuxt-config.ts","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxtconfigts"},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth"}]},{"type":"text","value":"-key inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":" to configure the module itself. Right now this is limited to the following options:"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\n  modules: ['@sidebase/nuxt-auth'],\n  auth: {\n    // The module is enabled. Change this to disable the module\n    isEnabled: true,\n\n    // The origin is set to the development origin. Change this when deploying to production\n    origin: 'http://localhost:300',\n\n    // The base path to the authentication endpoints. Change this if you want to add your auth-endpoints at a non-default location\n    basePath: '/api/auth'\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default defineNuxtConfig({\n  modules: ['@sidebase/nuxt-auth'],\n  auth: {\n    // The module is enabled. Change this to disable the module\n    isEnabled: true,\n\n    // The origin is set to the development origin. Change this when deploying to production\n    origin: 'http://localhost:300',\n\n    // The base path to the authentication endpoints. Change this if you want to add your auth-endpoints at a non-default location\n    basePath: '/api/auth'\n  }\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":" together are equivalent to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_URL"}]},{"type":"text","value":" environment variable of NextAuth.js"}]},{"type":"element","tag":"h2","props":{"id":"origin"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"You must set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" in production, this includes when you run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":"!"}]},{"type":"text","value":" This is so that "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":" can ensure that callbacks for authentication are correct. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" consists out of (up to) 3 parts:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"scheme: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host: e.g., "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"example.org"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"www.sidebase.io"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"port: e.g., "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":3000"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":4444"}]},{"type":"text","value":"; leave empty to implicitly set "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":80"}]},{"type":"text","value":" (this is an internet convention, don't ask)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For "},{"type":"element","tag":"a","props":{"href":"https://nuxt-auth-example.sidebase.io","rel":["nofollow"]},"children":[{"type":"text","value":"the demo-app"}]},{"type":"text","value":" we set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://nuxt-auth-example.sidebase.io"}]},{"type":"text","value":". If for some reason required, you can explicitly set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000"}]},{"type":"text","value":" to stop "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":" from aborting "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" when the origin is unset."}]},{"type":"element","tag":"h2","props":{"id":"basepath"},"children":[{"type":"text","value":"basePath"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is what tells the module where you added the authentication endpoints. Per default the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/auth"}]},{"type":"text","value":", so that means that the module expects that all requests to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/auth/*"}]},{"type":"text","value":" will be handled by the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To statify this, you need to create a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#catch-all-route","rel":["nofollow"]},"children":[{"type":"text","value":"catch-all server-route"}]},{"type":"text","value":" at that location by creating a file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/auth/[...].ts"}]},{"type":"text","value":" that exports the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":", see more on this in the "},{"type":"element","tag":"a","props":{"href":"#quick-start"},"children":[{"type":"text","value":"Quick Start"}]},{"type":"text","value":" or in the "},{"type":"element","tag":"a","props":{"href":"#serverapiauthts"},"children":[{"type":"text","value":"configuration section below"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to have the authentication at another location, you can overwrite the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":", e.g., when setting:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath: \"/api/_auth\""}]},{"type":"text","value":" -> add the authentication catch-all endpoints into "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/_auth/[...].ts"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath: \"/_auth\""}]},{"type":"text","value":" -> add the authentication catch-all endpoints into "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/routes/_auth/[...].ts"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server/#server-routes","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt server-routes docs on this"}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"h2","props":{"id":"nuxtauthhandler"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler({ ... })"}]},{"type":"text","value":" to configure how the authentication itself behaves:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // your authentication configuration here!\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // your authentication configuration here!\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":" accepts "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/configuration/options#options","rel":["nofollow"]},"children":[{"type":"text","value":"all options that NextAuth.js accepts for its API initialization"}]},{"type":"text","value":". Use this place to configure authentication providers (oauth-google, credential flow, ...), your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":" (equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_SECRET"}]},{"type":"text","value":" in NextAuth.js), add callbacks for authentication events, configure a custom logger and more. Read the linked "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":" configuration to figure out how this works and what you can do."}]}]},"toc":true,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxtconfigts"},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth"}]},{"type":"text","value":"-key inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":" to configure the module itself. Right now this is limited to the following options:"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\n  modules: ['@sidebase/nuxt-auth'],\n  auth: {\n    // The module is enabled. Change this to disable the module\n    isEnabled: true,\n\n    // The origin is set to the development origin. Change this when deploying to production\n    origin: 'http://localhost:300',\n\n    // The base path to the authentication endpoints. Change this if you want to add your auth-endpoints at a non-default location\n    basePath: '/api/auth'\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f1b89"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3f1b89"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a25cb"},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f11516"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-d06649"},"children":[{"type":"text","value":"'@sidebase/nuxt-auth'"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-f11516"},"children":[{"type":"text","value":"auth"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d1edd9"},"children":[{"type":"text","value":"// The module is enabled. Change this to disable the module"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f11516"},"children":[{"type":"text","value":"isEnabled"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f7a745"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d1edd9"},"children":[{"type":"text","value":"// The origin is set to the development origin. Change this when deploying to production"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f11516"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d06649"},"children":[{"type":"text","value":"'http://localhost:300'"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d1edd9"},"children":[{"type":"text","value":"// The base path to the authentication endpoints. Change this if you want to add your auth-endpoints at a non-default location"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-f11516"},"children":[{"type":"text","value":"basePath"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-d06649"},"children":[{"type":"text","value":"'/api/auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":" together are equivalent to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_URL"}]},{"type":"text","value":" environment variable of NextAuth.js"}]},{"type":"element","tag":"h2","props":{"id":"origin"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"You must set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" in production, this includes when you run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":"!"}]},{"type":"text","value":" This is so that "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":" can ensure that callbacks for authentication are correct. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" consists out of (up to) 3 parts:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"scheme: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host: e.g., "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"example.org"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"www.sidebase.io"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"port: e.g., "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":3000"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":4444"}]},{"type":"text","value":"; leave empty to implicitly set "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":80"}]},{"type":"text","value":" (this is an internet convention, don't ask)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For "},{"type":"element","tag":"a","props":{"href":"https://nuxt-auth-example.sidebase.io","rel":["nofollow"]},"children":[{"type":"text","value":"the demo-app"}]},{"type":"text","value":" we set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://nuxt-auth-example.sidebase.io"}]},{"type":"text","value":". If for some reason required, you can explicitly set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000"}]},{"type":"text","value":" to stop "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":" from aborting "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" when the origin is unset."}]},{"type":"element","tag":"h2","props":{"id":"basepath"},"children":[{"type":"text","value":"basePath"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is what tells the module where you added the authentication endpoints. Per default the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/auth"}]},{"type":"text","value":", so that means that the module expects that all requests to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/auth/*"}]},{"type":"text","value":" will be handled by the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To statify this, you need to create a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#catch-all-route","rel":["nofollow"]},"children":[{"type":"text","value":"catch-all server-route"}]},{"type":"text","value":" at that location by creating a file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/auth/[...].ts"}]},{"type":"text","value":" that exports the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":", see more on this in the "},{"type":"element","tag":"a","props":{"href":"#quick-start"},"children":[{"type":"text","value":"Quick Start"}]},{"type":"text","value":" or in the "},{"type":"element","tag":"a","props":{"href":"#serverapiauthts"},"children":[{"type":"text","value":"configuration section below"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to have the authentication at another location, you can overwrite the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":", e.g., when setting:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath: \"/api/_auth\""}]},{"type":"text","value":" -> add the authentication catch-all endpoints into "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/_auth/[...].ts"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath: \"/_auth\""}]},{"type":"text","value":" -> add the authentication catch-all endpoints into "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/routes/_auth/[...].ts"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server/#server-routes","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt server-routes docs on this"}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"h2","props":{"id":"nuxtauthhandler"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler({ ... })"}]},{"type":"text","value":" to configure how the authentication itself behaves:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // your authentication configuration here!\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d1edd9"},"children":[{"type":"text","value":"// file: ~/server/api/auth/[...].ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f1b89"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-f11516"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-3f1b89"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d06649"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f1b89"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3f1b89"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9a25cb"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-d1edd9"},"children":[{"type":"text","value":"// your authentication configuration here!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5e2ca5"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":" accepts "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/configuration/options#options","rel":["nofollow"]},"children":[{"type":"text","value":"all options that NextAuth.js accepts for its API initialization"}]},{"type":"text","value":". Use this place to configure authentication providers (oauth-google, credential flow, ...), your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":" (equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_SECRET"}]},{"type":"text","value":" in NextAuth.js), add callbacks for authentication events, configure a custom logger and more. Read the linked "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":" configuration to figure out how this works and what you can do."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-f7a745{color:#D19A66}.ct-d1edd9{color:#7F848E}.ct-d06649{color:#98C379}.ct-f11516{color:#E06C75}.ct-9a25cb{color:#61AFEF}.ct-5e2ca5{color:#ABB2BF}.ct-3f1b89{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"origin","depth":2,"text":"origin"},{"id":"basepath","depth":2,"text":"basePath"},{"id":"nuxtauthhandler","depth":2,"text":"NuxtAuthHandler"}]}},"_type":"markdown","_id":"content:2.guide:2.configuration:1.nuxt-config.md","_source":"content","_file":"2.guide/2.configuration/1.nuxt-config.md","_extension":"md"},{"_path":"/guide/configuration/nuxt-auth-handler","_dir":"configuration","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"NuxtAuthHandler","description":"Learn how to configure nuxt-auth with the NuxtAuthHandler","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxtauthhandler"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After setting up nuxt-auth inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-config.ts"}]},{"type":"text","value":" you can begin defining providers and other options inside your NuxtAuthHandler."}]},{"type":"element","tag":"h2","props":{"id":"creating-a-new-nuxtauthhandler"},"children":[{"type":"text","value":"Creating a new NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to create your own "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHanlder"}]},{"type":"text","value":", create the file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/auth/[...].ts"}]},{"type":"text","value":". This file will automatically intercept all\nrequests going to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://localhost/api/auth"}]},{"type":"text","value":" and inject the authentication api. If you wish you can also use a custom api path, however this change will need to be\nreflected in the "},{"type":"element","tag":"a","props":{"href":"/nuxt-auth/configuration/nuxt-config#basepath"},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":", which is configured in the "},{"type":"element","tag":"a","props":{"href":"/nuxt-auth/configuration/nuxt-config"},"children":[{"type":"text","value":"nuxt-config.ts"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"configuring-your-nuxtauthhandler"},"children":[{"type":"text","value":"Configuring your NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler({ ... })"}]},{"type":"text","value":" to configure how the authentication itself behaves:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"import { NuxtAuthHandler } from '#auth'\n    \nexport default NuxtAuthHandler({\n    // your authentication configuration here!\n})\n","filename":"Simple NuxtAuthHandler","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { NuxtAuthHandler } from '#auth'\n    \nexport default NuxtAuthHandler({\n    // your authentication configuration here!\n})\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"import CredentialsProvider from 'next-auth/providers/credentials'\nimport GithubProvider from 'next-auth/providers/github'\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // A secret string you define, to ensure correct encryption  \n  secret: 'your-secret-here',  \n  providers: [\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    GithubProvider.default({\n      clientId: 'your-client-id',\n      clientSecret: 'your-client-secret'\n    }),\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    CredentialsProvider.default({\n      // The name to display on the sign in form (e.g. 'Sign in with...')\n      name: 'Credentials',\n      // The credentials is used to generate a suitable form on the sign in page.\n      // You can specify whatever fields you are expecting to be submitted.\n      // e.g. domain, username, password, 2FA token, etc.\n      // You can pass any HTML attribute to the <input> tag through the object.\n      credentials: {\n        username: { label: 'Username', type: 'text', placeholder: '(hint: jsmith)' },\n        password: { label: 'Password', type: 'password', placeholder: '(hint: hunter2)' }\n      },\n      authorize (credentials: any) {\n        // You need to provide your own logic here that takes the credentials\n        // submitted and returns either a object representing a user or value\n        // that is false/null if the credentials are invalid.\n        // NOTE: THE BELOW LOGIC IS NOT SAFE OR PROPER FOR AUTHENTICATION!\n\n        const user = { id: '1', name: 'J Smith', username: 'jsmith', password: 'hunter2' }\n\n        if (credentials?.username === user.username && credentials?.password === user.password) {\n          // Any object returned will be saved in `user` property of the JWT\n          return user\n        } else {\n          // eslint-disable-next-line no-console\n          console.error('Warning: Malicious login attempt registered, bad credentials provided')\n\n          // If you return null then an error will be displayed advising the user to check their details.\n          return null\n\n          // You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter\n        }\n      }\n    })\n  ]\n})\n","filename":"Full NuxtAuthHandler","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import CredentialsProvider from 'next-auth/providers/credentials'\nimport GithubProvider from 'next-auth/providers/github'\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // A secret string you define, to ensure correct encryption  \n  secret: 'your-secret-here',  \n  providers: [\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    GithubProvider.default({\n      clientId: 'your-client-id',\n      clientSecret: 'your-client-secret'\n    }),\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    CredentialsProvider.default({\n      // The name to display on the sign in form (e.g. 'Sign in with...')\n      name: 'Credentials',\n      // The credentials is used to generate a suitable form on the sign in page.\n      // You can specify whatever fields you are expecting to be submitted.\n      // e.g. domain, username, password, 2FA token, etc.\n      // You can pass any HTML attribute to the <input> tag through the object.\n      credentials: {\n        username: { label: 'Username', type: 'text', placeholder: '(hint: jsmith)' },\n        password: { label: 'Password', type: 'password', placeholder: '(hint: hunter2)' }\n      },\n      authorize (credentials: any) {\n        // You need to provide your own logic here that takes the credentials\n        // submitted and returns either a object representing a user or value\n        // that is false/null if the credentials are invalid.\n        // NOTE: THE BELOW LOGIC IS NOT SAFE OR PROPER FOR AUTHENTICATION!\n\n        const user = { id: '1', name: 'J Smith', username: 'jsmith', password: 'hunter2' }\n\n        if (credentials?.username === user.username && credentials?.password === user.password) {\n          // Any object returned will be saved in `user` property of the JWT\n          return user\n        } else {\n          // eslint-disable-next-line no-console\n          console.error('Warning: Malicious login attempt registered, bad credentials provided')\n\n          // If you return null then an error will be displayed advising the user to check their details.\n          return null\n\n          // You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter\n        }\n      }\n    })\n  ]\n})\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":" accepts "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/configuration/options#options","rel":["nofollow"]},"children":[{"type":"text","value":"all options that NextAuth.js accepts for its API initialization"}]},{"type":"text","value":". Use this place to configure authentication providers (oauth-google, credential flow, ...), your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":" (equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_SECRET"}]},{"type":"text","value":" in NextAuth.js), add callbacks for authentication events, configure a custom logger and more. Read the linked "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":" configuration to figure out how this works and what you can do."}]}]},"toc":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxtauthhandler"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After setting up nuxt-auth inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-config.ts"}]},{"type":"text","value":" you can begin defining providers and other options inside your NuxtAuthHandler."}]},{"type":"element","tag":"h2","props":{"id":"creating-a-new-nuxtauthhandler"},"children":[{"type":"text","value":"Creating a new NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to create your own "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHanlder"}]},{"type":"text","value":", create the file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/auth/[...].ts"}]},{"type":"text","value":". This file will automatically intercept all\nrequests going to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://localhost/api/auth"}]},{"type":"text","value":" and inject the authentication api. If you wish you can also use a custom api path, however this change will need to be\nreflected in the "},{"type":"element","tag":"a","props":{"href":"/nuxt-auth/configuration/nuxt-config#basepath"},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":", which is configured in the "},{"type":"element","tag":"a","props":{"href":"/nuxt-auth/configuration/nuxt-config"},"children":[{"type":"text","value":"nuxt-config.ts"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"configuring-your-nuxtauthhandler"},"children":[{"type":"text","value":"Configuring your NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler({ ... })"}]},{"type":"text","value":" to configure how the authentication itself behaves:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"import { NuxtAuthHandler } from '#auth'\n    \nexport default NuxtAuthHandler({\n    // your authentication configuration here!\n})\n","filename":"Simple NuxtAuthHandler","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e2b4e"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// your authentication configuration here!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"import CredentialsProvider from 'next-auth/providers/credentials'\nimport GithubProvider from 'next-auth/providers/github'\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // A secret string you define, to ensure correct encryption  \n  secret: 'your-secret-here',  \n  providers: [\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    GithubProvider.default({\n      clientId: 'your-client-id',\n      clientSecret: 'your-client-secret'\n    }),\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    CredentialsProvider.default({\n      // The name to display on the sign in form (e.g. 'Sign in with...')\n      name: 'Credentials',\n      // The credentials is used to generate a suitable form on the sign in page.\n      // You can specify whatever fields you are expecting to be submitted.\n      // e.g. domain, username, password, 2FA token, etc.\n      // You can pass any HTML attribute to the <input> tag through the object.\n      credentials: {\n        username: { label: 'Username', type: 'text', placeholder: '(hint: jsmith)' },\n        password: { label: 'Password', type: 'password', placeholder: '(hint: hunter2)' }\n      },\n      authorize (credentials: any) {\n        // You need to provide your own logic here that takes the credentials\n        // submitted and returns either a object representing a user or value\n        // that is false/null if the credentials are invalid.\n        // NOTE: THE BELOW LOGIC IS NOT SAFE OR PROPER FOR AUTHENTICATION!\n\n        const user = { id: '1', name: 'J Smith', username: 'jsmith', password: 'hunter2' }\n\n        if (credentials?.username === user.username && credentials?.password === user.password) {\n          // Any object returned will be saved in `user` property of the JWT\n          return user\n        } else {\n          // eslint-disable-next-line no-console\n          console.error('Warning: Malicious login attempt registered, bad credentials provided')\n\n          // If you return null then an error will be displayed advising the user to check their details.\n          return null\n\n          // You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter\n        }\n      }\n    })\n  ]\n})\n","filename":"Full NuxtAuthHandler","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"CredentialsProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'next-auth/providers/credentials'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"GithubProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'next-auth/providers/github'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e2b4e"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// A secret string you define, to ensure correct encryption  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"secret"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'your-secret-here'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":",  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"providers"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"GithubProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2e2b4e"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"clientId"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'your-client-id'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"clientSecret"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'your-client-secret'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"    }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"CredentialsProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2e2b4e"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// The name to display on the sign in form (e.g. 'Sign in with...')"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'Credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// The credentials is used to generate a suitable form on the sign in page."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// You can specify whatever fields you are expecting to be submitted."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// e.g. domain, username, password, 2FA token, etc."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// You can pass any HTML attribute to the <input> tag through the object."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"credentials"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": { "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"label"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'Username'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'text'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"placeholder"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'(hint: jsmith)'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": { "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"label"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'Password'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'password'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"placeholder"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'(hint: hunter2)'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-2e2b4e"},"children":[{"type":"text","value":"authorize"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"credentials"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// You need to provide your own logic here that takes the credentials"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// submitted and returns either a object representing a user or value"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// that is false/null if the credentials are invalid."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// NOTE: THE BELOW LOGIC IS NOT SAFE OR PROPER FOR AUTHENTICATION!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a0375"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'1'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'J Smith'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'jsmith'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'hunter2'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"credentials"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a0375"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a0375"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"credentials"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0a0375"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// Any object returned will be saved in `user` property of the JWT"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-57f5f1"},"children":[{"type":"text","value":"user"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        } "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// eslint-disable-next-line no-console"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-bfdd99"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-2e2b4e"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-1dee3c"},"children":[{"type":"text","value":"'Warning: Malicious login attempt registered, bad credentials provided'"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// If you return null then an error will be displayed advising the user to check their details."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-b1163a"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-937a82"},"children":[{"type":"text","value":"null"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-28050a"},"children":[{"type":"text","value":"// You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"    })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"  ]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3f7665"},"children":[{"type":"text","value":"})"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":" accepts "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/configuration/options#options","rel":["nofollow"]},"children":[{"type":"text","value":"all options that NextAuth.js accepts for its API initialization"}]},{"type":"text","value":". Use this place to configure authentication providers (oauth-google, credential flow, ...), your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":" (equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_SECRET"}]},{"type":"text","value":" in NextAuth.js), add callbacks for authentication events, configure a custom logger and more. Read the linked "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":" configuration to figure out how this works and what you can do."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-937a82{color:#D19A66}.ct-0a0375{color:#56B6C2}.ct-bfdd99{color:#E5C07B}.ct-28050a{color:#7F848E}.ct-2e2b4e{color:#61AFEF}.ct-1dee3c{color:#98C379}.ct-57f5f1{color:#E06C75}.ct-3f7665{color:#ABB2BF}.ct-b1163a{color:#C678DD}"}]}]},"_type":"markdown","_id":"content:2.guide:2.configuration:2.nuxt-auth-handler.md","_source":"content","_file":"2.guide/2.configuration/2.nuxt-auth-handler.md","_extension":"md"},{"_path":"/guide/providers/_dir","_dir":"providers","_draft":false,"_partial":true,"_locale":"en","title":"Providers","icon":"heroicons-outline:user-group","_id":"content:2.guide:3.providers:_dir.yml","_type":"yaml","_source":"content","_file":"2.guide/3.providers/_dir.yml","_extension":"yml"},{"_path":"/guide/providers","_dir":"guide","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Overview","description":"We are currently working on adding more examples of providers using nuxt-auth. In the meantime you can view the official provider documentation by NextAuth here.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"providers"},"children":[{"type":"text","value":"Providers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are currently working on adding more examples of providers using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":". In the meantime you can view the official provider documentation by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/providers/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"providers"},"children":[{"type":"text","value":"Providers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are currently working on adding more examples of providers using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":". In the meantime you can view the official provider documentation by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/providers/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:3.providers:index.md","_source":"content","_file":"2.guide/3.providers/index.md","_extension":"md"},{"_path":"/guide/usage/_dir","_dir":"usage","_draft":false,"_partial":true,"_locale":"en","title":"Usage","icon":"heroicons-outline:computer-desktop","_id":"content:2.guide:4.usage:_dir.yml","_type":"yaml","_source":"content","_file":"2.guide/4.usage/_dir.yml","_extension":"yml"},{"_path":"/guide/usage","_dir":"guide","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Application side","description":"This module allows you user-data access, signing in, signing out and more via useSession. It also allows you to defined middleware that protects pages.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"application-side-usage"},"children":[{"type":"text","value":"Application-side usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This module allows you user-data access, signing in, signing out and more "},{"type":"element","tag":"a","props":{"href":"#session-access-and-manipulation"},"children":[{"type":"text","value":"via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]}]},{"type":"text","value":". It also allows you to defined "},{"type":"element","tag":"a","props":{"href":"#middleware"},"children":[{"type":"text","value":"middleware that protects pages"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application-side usage refers to any code like pages, components or composables that are part of the universal server- and client-side rendering of Nuxt, see more in the "},{"type":"element","tag":"a","props":{"href":"#glossary"},"children":[{"type":"text","value":"glossary"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"session-access-and-manipulation"},"children":[{"type":"text","value":"Session access and manipulation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" composable is your main gateway to accessing and manipulating session-state and data. Here's the main methdos you can use:"}]},{"type":"element","tag":"code","props":{"code":"const {\n  status,\n  data,\n  getCsrfToken,\n  getProviders,\n  getSession,\n  signIn,\n  signOut,\n} = await useSession({\n  // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n  required: true\n})\n\n// Session status, either `unauthenticated`, `loading`, `authenticated`, see https://next-auth.js.org/getting-started/client#signout\nstatus.value\n\n// Session data, either `undefined` (= authentication not attempted), `null` (= user unauthenticated), `loading` (= session loading in progress), see https://next-auth.js.org/getting-started/client#signout\ndata.value\n\n// Get / Reload the current session from the server, pass `{ required: true }` to force a login if no session exists, see https://next-auth.js.org/getting-started/client#getsession\nawait getSession()\n\n// Get the current CSRF token, usually you do not need this function, see https://next-auth.js.org/getting-started/client#signout\nawait getCsrfToken()\n\n// Get the supported providers, e.g., to build your own login page, see https://next-auth.js.org/getting-started/client#getproviders\nawait getProviders()\n\n// Trigger a sign in, see https://next-auth.js.org/getting-started/client#signin\nawait signIn()\n\n// Trigger a sign in with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn(undefined, { callbackUrl: '/protected' })\n\n// Trigger a sign in via a specific authentication provider with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn('github', { callbackUrl: '/protected' })\n\n// Trigger a sign in with username and password already passed, e.g., from your own custom-made sign-in form\nawait singIn('credentials', { username: 'jsmith', password: 'hunter2' })\n\n// Trigger a sign out, see https://next-auth.js.org/getting-started/client#signout\nawait signOut()\n\n// Trigger a sign out and send the user to the sign out page afterwards\nawait signOut({ calbackUrl: '/signout' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const {\n  status,\n  data,\n  getCsrfToken,\n  getProviders,\n  getSession,\n  signIn,\n  signOut,\n} = await useSession({\n  // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n  required: true\n})\n\n// Session status, either `unauthenticated`, `loading`, `authenticated`, see https://next-auth.js.org/getting-started/client#signout\nstatus.value\n\n// Session data, either `undefined` (= authentication not attempted), `null` (= user unauthenticated), `loading` (= session loading in progress), see https://next-auth.js.org/getting-started/client#signout\ndata.value\n\n// Get / Reload the current session from the server, pass `{ required: true }` to force a login if no session exists, see https://next-auth.js.org/getting-started/client#getsession\nawait getSession()\n\n// Get the current CSRF token, usually you do not need this function, see https://next-auth.js.org/getting-started/client#signout\nawait getCsrfToken()\n\n// Get the supported providers, e.g., to build your own login page, see https://next-auth.js.org/getting-started/client#getproviders\nawait getProviders()\n\n// Trigger a sign in, see https://next-auth.js.org/getting-started/client#signin\nawait signIn()\n\n// Trigger a sign in with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn(undefined, { callbackUrl: '/protected' })\n\n// Trigger a sign in via a specific authentication provider with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn('github', { callbackUrl: '/protected' })\n\n// Trigger a sign in with username and password already passed, e.g., from your own custom-made sign-in form\nawait singIn('credentials', { username: 'jsmith', password: 'hunter2' })\n\n// Trigger a sign out, see https://next-auth.js.org/getting-started/client#signout\nawait signOut()\n\n// Trigger a sign out and send the user to the sign out page afterwards\nawait signOut({ calbackUrl: '/signout' })\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Session "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":" has the following interface:"}]},{"type":"element","tag":"code","props":{"code":"interface DefaultSession {\n  user?: {\n    name?: string | null;\n    email?: string | null;\n    image?: string | null;\n  };\n  expires: ISODateString;\n}\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"interface DefaultSession {\n  user?: {\n    name?: string | null;\n    email?: string | null;\n    image?: string | null;\n  };\n  expires: ISODateString;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that this is only set when the use is logged-in and when the provider used to login the user provides the fields."}]},{"type":"element","tag":"h3","props":{"id":"redirects"},"children":[{"type":"text","value":"Redirects"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also pass the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" option to both the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signIn"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signOut"}]},{"type":"text","value":" method. This allows you to redirect a user to a certain pages, after they've completed the action. This can be useful when a user attempts to open a page ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/protected"}]},{"type":"text","value":") but has to go through external authentication (e.g., via their google account) first."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use it like:"}]},{"type":"element","tag":"code","props":{"code":"await signIn({ callbackUrl: '/protected' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"await signIn({ callbackUrl: '/protected' })\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"to redirect the user to the protected page they wanted to access "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"after"}]},{"type":"text","value":" they've been authenticated."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can do the same for signing out the user:"}]},{"type":"element","tag":"code","props":{"code":"await signOut({ callbackUrl: '/protected' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"await signOut({ callbackUrl: '/protected' })\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"E.g., here to redirect the user away from the already loaded, protected, page after signout (else, you will have to handle the redirect yourself)."}]},{"type":"element","tag":"h3","props":{"id":"custom-sign-in-page"},"children":[{"type":"text","value":"Custom sign in page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To create your custom sign-in page you can use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signIn"}]},{"type":"text","value":" to directly start a provider-flow once the user selected it, e.g., by clicking on a button on your custom sign-in page. Here is a very simple sign-in page that either directly starts a github-oauth sign in flow or directly signs in the user via the credentials flow:"}]},{"type":"element","tag":"code","props":{"code":"<template>\n  <div>\n    <p>Sign In Options</p>\n    <button @click=\"signIn('github')\">Github</button>\n    <!-- NOTE: Here we hard-coded username and password, on your own page this should probably be connected to two inputs for username + password -->\n    <button @click=\"signIn('credentials', { username: 'test', password: 'hunter2' })\">Username and Password</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { signIn } = await useSession({ required: false })\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<template>\n  <div>\n    <p>Sign In Options</p>\n    <button @click=\"signIn('github')\">Github</button>\n    <!-- NOTE: Here we hard-coded username and password, on your own page this should probably be connected to two inputs for username + password -->\n    <button @click=\"signIn('credentials', { username: 'test', password: 'hunter2' })\">Username and Password</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { signIn } = await useSession({ required: false })\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: In the above example "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"username"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" are hard-coded. In your own custom page, these two fields should probably come from inputs on your page."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to create a custom sign-in page that dynamically offers sign-in options based on your configured providers, you can call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getProviders()"}]},{"type":"text","value":" first and then iterate over the supported providers to generate your sign in page."}]},{"type":"element","tag":"h2","props":{"id":"middleware"},"children":[{"type":"text","value":"Middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use this library to define application middleware. This library supports all of "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/middleware#middleware-directory","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt's supported middleware approaches"}]},{"type":"text","value":". In all methods shown below we make use of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" parameter to give the best user experience: If the user is not authenticated, they are forced to login, but will be redirected to the same page they wanted to visit after they successfully logged in. Without a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" parameter, the user would be directed to the index page "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"global-middleware"},"children":[{"type":"text","value":"Global middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a global authentication middleware that ensures that your user is authenticated no matter which page they visit. Create a file in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"middleware"}]},{"type":"text","value":" directory that has a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".global.ts"}]},{"type":"text","value":" suffix."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It should look like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's it! This middleware will fetch a session and if no active session exists for the current user redirect to the login screen. If you want to write custom redirect logic, you could alter the above code to only apply to specific routes."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here is a global middleware that protects only the routes that start with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/secret/"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  if (to.path.startsWith('/secret/')) {\n    await useSession({ callbackUrl: to.path })\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  if (to.path.startsWith('/secret/')) {\n    await useSession({ callbackUrl: to.path })\n  }\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example of a middleware that redirects to a custom login page:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  // 1. Always allow access to the login page\n  if (to.path === '/login') {\n    return\n  }\n\n  // 2. Otherwise: Check status and redirect to login page\n  const { status } = await useSession({ required: false })\n  if (status.value !== 'authenticated') {\n    navigateTo('/login')\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  // 1. Always allow access to the login page\n  if (to.path === '/login') {\n    return\n  }\n\n  // 2. Otherwise: Check status and redirect to login page\n  const { status } = await useSession({ required: false })\n  if (status.value !== 'authenticated') {\n    navigateTo('/login')\n  }\n})\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"named-middleware"},"children":[{"type":"text","value":"Named middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Named middleware behave similar to "},{"type":"element","tag":"a","props":{"href":"#global-middleware"},"children":[{"type":"text","value":"global middleware"}]},{"type":"text","value":" but are not automatically applied to any pages."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To use them, first create a middleware:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/middleware/auth.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then inside your pages use the middleware with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: ['auth']\n})\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: ['auth']\n})\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" can only be used inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" directory."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt now calls the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth.ts"}]},{"type":"text","value":" middleware on every visit to this page."}]},{"type":"element","tag":"h3","props":{"id":"inline-middleware"},"children":[{"type":"text","value":"Inline middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To define a named middleware, you need to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" as described "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/api/utils/define-page-meta/","rel":["nofollow"]},"children":[{"type":"text","value":"in the nuxt docs"}]},{"type":"text","value":". Then you can just call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" as in the other middleware. Here's an example that would protect just the page itself:"}]},{"type":"element","tag":"code","props":{"code":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: async () => {\n    await useSession({ callbackUrl: '/protected' })\n  }\n})\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: async () => {\n    await useSession({ callbackUrl: '/protected' })\n  }\n})\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" can only be used inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" directory"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"application-side-usage"},"children":[{"type":"text","value":"Application-side usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This module allows you user-data access, signing in, signing out and more "},{"type":"element","tag":"a","props":{"href":"#session-access-and-manipulation"},"children":[{"type":"text","value":"via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]}]},{"type":"text","value":". It also allows you to defined "},{"type":"element","tag":"a","props":{"href":"#middleware"},"children":[{"type":"text","value":"middleware that protects pages"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application-side usage refers to any code like pages, components or composables that are part of the universal server- and client-side rendering of Nuxt, see more in the "},{"type":"element","tag":"a","props":{"href":"#glossary"},"children":[{"type":"text","value":"glossary"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"session-access-and-manipulation"},"children":[{"type":"text","value":"Session access and manipulation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" composable is your main gateway to accessing and manipulating session-state and data. Here's the main methdos you can use:"}]},{"type":"element","tag":"code","props":{"code":"const {\n  status,\n  data,\n  getCsrfToken,\n  getProviders,\n  getSession,\n  signIn,\n  signOut,\n} = await useSession({\n  // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n  required: true\n})\n\n// Session status, either `unauthenticated`, `loading`, `authenticated`, see https://next-auth.js.org/getting-started/client#signout\nstatus.value\n\n// Session data, either `undefined` (= authentication not attempted), `null` (= user unauthenticated), `loading` (= session loading in progress), see https://next-auth.js.org/getting-started/client#signout\ndata.value\n\n// Get / Reload the current session from the server, pass `{ required: true }` to force a login if no session exists, see https://next-auth.js.org/getting-started/client#getsession\nawait getSession()\n\n// Get the current CSRF token, usually you do not need this function, see https://next-auth.js.org/getting-started/client#signout\nawait getCsrfToken()\n\n// Get the supported providers, e.g., to build your own login page, see https://next-auth.js.org/getting-started/client#getproviders\nawait getProviders()\n\n// Trigger a sign in, see https://next-auth.js.org/getting-started/client#signin\nawait signIn()\n\n// Trigger a sign in with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn(undefined, { callbackUrl: '/protected' })\n\n// Trigger a sign in via a specific authentication provider with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn('github', { callbackUrl: '/protected' })\n\n// Trigger a sign in with username and password already passed, e.g., from your own custom-made sign-in form\nawait singIn('credentials', { username: 'jsmith', password: 'hunter2' })\n\n// Trigger a sign out, see https://next-auth.js.org/getting-started/client#signout\nawait signOut()\n\n// Trigger a sign out and send the user to the sign out page afterwards\nawait signOut({ calbackUrl: '/signout' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"getCsrfToken"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"getProviders"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"getSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-391931"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"required"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Session status, either `unauthenticated`, `loading`, `authenticated`, see https://next-auth.js.org/getting-started/client#signout"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"value"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Session data, either `undefined` (= authentication not attempted), `null` (= user unauthenticated), `loading` (= session loading in progress), see https://next-auth.js.org/getting-started/client#signout"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"value"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Get / Reload the current session from the server, pass `{ required: true }` to force a login if no session exists, see https://next-auth.js.org/getting-started/client#getsession"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"getSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Get the current CSRF token, usually you do not need this function, see https://next-auth.js.org/getting-started/client#signout"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"getCsrfToken"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Get the supported providers, e.g., to build your own login page, see https://next-auth.js.org/getting-started/client#getproviders"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"getProviders"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Trigger a sign in, see https://next-auth.js.org/getting-started/client#signin"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Trigger a sign in with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'/protected'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Trigger a sign in via a specific authentication provider with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'github'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'/protected'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Trigger a sign in with username and password already passed, e.g., from your own custom-made sign-in form"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"singIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'jsmith'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'hunter2'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Trigger a sign out, see https://next-auth.js.org/getting-started/client#signout"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// Trigger a sign out and send the user to the sign out page afterwards"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"calbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'/signout'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Session "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":" has the following interface:"}]},{"type":"element","tag":"code","props":{"code":"interface DefaultSession {\n  user?: {\n    name?: string | null;\n    email?: string | null;\n    image?: string | null;\n  };\n  expires: ISODateString;\n}\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"DefaultSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"email"}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"expires"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"ISODateString"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that this is only set when the use is logged-in and when the provider used to login the user provides the fields."}]},{"type":"element","tag":"h3","props":{"id":"redirects"},"children":[{"type":"text","value":"Redirects"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also pass the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" option to both the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signIn"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signOut"}]},{"type":"text","value":" method. This allows you to redirect a user to a certain pages, after they've completed the action. This can be useful when a user attempts to open a page ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/protected"}]},{"type":"text","value":") but has to go through external authentication (e.g., via their google account) first."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use it like:"}]},{"type":"element","tag":"code","props":{"code":"await signIn({ callbackUrl: '/protected' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'/protected'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"to redirect the user to the protected page they wanted to access "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"after"}]},{"type":"text","value":" they've been authenticated."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can do the same for signing out the user:"}]},{"type":"element","tag":"code","props":{"code":"await signOut({ callbackUrl: '/protected' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'/protected'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"E.g., here to redirect the user away from the already loaded, protected, page after signout (else, you will have to handle the redirect yourself)."}]},{"type":"element","tag":"h3","props":{"id":"custom-sign-in-page"},"children":[{"type":"text","value":"Custom sign in page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To create your custom sign-in page you can use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signIn"}]},{"type":"text","value":" to directly start a provider-flow once the user selected it, e.g., by clicking on a button on your custom sign-in page. Here is a very simple sign-in page that either directly starts a github-oauth sign in flow or directly signs in the user via the credentials flow:"}]},{"type":"element","tag":"code","props":{"code":"<template>\n  <div>\n    <p>Sign In Options</p>\n    <button @click=\"signIn('github')\">Github</button>\n    <!-- NOTE: Here we hard-coded username and password, on your own page this should probably be connected to two inputs for username + password -->\n    <button @click=\"signIn('credentials', { username: 'test', password: 'hunter2' })\">Username and Password</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { signIn } = await useSession({ required: false })\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"Sign"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"In"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"Options"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" @"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"click"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'github'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"Github"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    <!-- "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"NOTE:"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"Here"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"we"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"hard-coded"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"and"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"your"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"own"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"page"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"should"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"probably"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"be"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"connected"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"two"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"inputs"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" @"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"click"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'test'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'hunter2'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"Username"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"and"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"Password"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-391931"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"required"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: In the above example "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"username"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" are hard-coded. In your own custom page, these two fields should probably come from inputs on your page."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to create a custom sign-in page that dynamically offers sign-in options based on your configured providers, you can call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getProviders()"}]},{"type":"text","value":" first and then iterate over the supported providers to generate your sign in page."}]},{"type":"element","tag":"h2","props":{"id":"middleware"},"children":[{"type":"text","value":"Middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use this library to define application middleware. This library supports all of "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/middleware#middleware-directory","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt's supported middleware approaches"}]},{"type":"text","value":". In all methods shown below we make use of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" parameter to give the best user experience: If the user is not authenticated, they are forced to login, but will be redirected to the same page they wanted to visit after they successfully logged in. Without a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" parameter, the user would be directed to the index page "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"global-middleware"},"children":[{"type":"text","value":"Global middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a global authentication middleware that ensures that your user is authenticated no matter which page they visit. Create a file in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"middleware"}]},{"type":"text","value":" directory that has a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".global.ts"}]},{"type":"text","value":" suffix."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It should look like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's it! This middleware will fetch a session and if no active session exists for the current user redirect to the login screen. If you want to write custom redirect logic, you could alter the above code to only apply to specific routes."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here is a global middleware that protects only the routes that start with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/secret/"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  if (to.path.startsWith('/secret/')) {\n    await useSession({ callbackUrl: to.path })\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"startsWith"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'/secret/'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":")) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example of a middleware that redirects to a custom login page:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  // 1. Always allow access to the login page\n  if (to.path === '/login') {\n    return\n  }\n\n  // 2. Otherwise: Check status and redirect to login page\n  const { status } = await useSession({ required: false })\n  if (status.value !== 'authenticated') {\n    navigateTo('/login')\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// 1. Always allow access to the login page"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-391931"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'/login'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"return"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// 2. Otherwise: Check status and redirect to login page"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-391931"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"required"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-391931"},"children":[{"type":"text","value":"!=="}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'authenticated'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"navigateTo"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'/login'"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"named-middleware"},"children":[{"type":"text","value":"Named middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Named middleware behave similar to "},{"type":"element","tag":"a","props":{"href":"#global-middleware"},"children":[{"type":"text","value":"global middleware"}]},{"type":"text","value":" but are not automatically applied to any pages."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To use them, first create a middleware:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"// file: ~/middleware/auth.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-80aacb"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9dd588"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-80bd92"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then inside your pages use the middleware with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: ['auth']\n})\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"<!-- file: ~/pages/protected.vue -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'m a secret!</div>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"</template>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"<script setup lang=\"ts\">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"definePageMeta({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"  middleware: ['"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"auth"}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"']"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"</script>"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" can only be used inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" directory."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt now calls the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth.ts"}]},{"type":"text","value":" middleware on every visit to this page."}]},{"type":"element","tag":"h3","props":{"id":"inline-middleware"},"children":[{"type":"text","value":"Inline middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To define a named middleware, you need to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" as described "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/api/utils/define-page-meta/","rel":["nofollow"]},"children":[{"type":"text","value":"in the nuxt docs"}]},{"type":"text","value":". Then you can just call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" as in the other middleware. Here's an example that would protect just the page itself:"}]},{"type":"element","tag":"code","props":{"code":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: async () => {\n    await useSession({ callbackUrl: '/protected' })\n  }\n})\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3148b7"},"children":[{"type":"text","value":"<!-- file: ~/pages/protected.vue -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-c4c79c"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"'m a secret!</div>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"</template>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"<script setup lang=\"ts\">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"definePageMeta({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"  middleware: async () => {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"    await useSession({ callbackUrl: '"}]},{"type":"element","tag":"span","props":{"class":"ct-70fea7"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-ba63c8"},"children":[{"type":"text","value":"protected"}]},{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"' })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-272d72"},"children":[{"type":"text","value":"</script>"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" can only be used inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" directory"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-272d72{color:#98C379}.ct-ba63c8{color:#D19A66}.ct-c4c79c{color:#E06C75}.ct-3148b7{color:#7F848E}.ct-9dd588{color:#61AFEF}.ct-391931{color:#56B6C2}.ct-80bd92{color:#E5C07B}.ct-70fea7{color:#ABB2BF}.ct-80aacb{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"session-access-and-manipulation","depth":2,"text":"Session access and manipulation","children":[{"id":"redirects","depth":3,"text":"Redirects"},{"id":"custom-sign-in-page","depth":3,"text":"Custom sign in page"}]},{"id":"middleware","depth":2,"text":"Middleware","children":[{"id":"global-middleware","depth":3,"text":"Global middleware"},{"id":"named-middleware","depth":3,"text":"Named middleware"},{"id":"inline-middleware","depth":3,"text":"Inline middleware"}]}]}},"_type":"markdown","_id":"content:2.guide:4.usage:0.index.md","_source":"content","_file":"2.guide/4.usage/0.index.md","_extension":"md"},{"_path":"/guide/usage/server-side","_dir":"usage","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Server side","description":"On the server side you can get access to the current session like this:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"server-side-usage"},"children":[{"type":"text","value":"Server-side usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On the server side you can get access to the current session like this:"}]},{"type":"element","tag":"code","props":{"code":"import { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is inspired by "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/tutorials/securing-pages-and-api-routes#securing-api-routes","rel":["nofollow"]},"children":[{"type":"text","value":"the getServerSession"}]},{"type":"text","value":" of NextAuth.js. It also avoids an external, internet call to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET /api/auth/sessions"}]},{"type":"text","value":" endpoint, instead directly calling a pure JS-method."}]},{"type":"element","tag":"h2","props":{"id":"server-side-endpoint-protection"},"children":[{"type":"text","value":"Server-side endpoint protection"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To protect an endpoint with, check the session after fetching it:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/protected.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    return { status: 'unauthenticated!' }\n  }\n  return { status: 'authenticated!' }\n})\n\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/protected.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    return { status: 'unauthenticated!' }\n  }\n  return { status: 'authenticated!' }\n})\n\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"server-side-middleware"},"children":[{"type":"text","value":"Server-side middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also use this in a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#server-middleware","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt server middleware"}]},{"type":"text","value":" to protect multiple pages at once and keep the authentication logic out of your endpoints:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/middleware/auth.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    throw createError({ statusMessage: 'Unauthenticated', statusCode: 403 })\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/middleware/auth.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    throw createError({ statusMessage: 'Unauthenticated', statusCode: 403 })\n  }\n})\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-the-jwt-token"},"children":[{"type":"text","value":"Getting the JWT Token"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Getting the (decoded) JWT token of the current user can be helpful, e.g., to use it to access an external api that requires this token for authentication or authorization."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can get the JWT token that was passed along with the request using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getToken"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const token = await getToken({ event })\n\n  return token || 'no token present'\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const token = await getToken({ event })\n\n  return token || 'no token present'\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The function behaves identical to the "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/tutorials/securing-pages-and-api-routes#using-gettoken","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getToken"}]},{"type":"text","value":" function from NextAuth.js"}]},{"type":"text","value":" with one change: you have to pass in the h3-"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"event"}]},{"type":"text","value":" instead of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"req"}]},{"type":"text","value":". This is due to how cookies can be accessed on h3: not via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"req.cookies"}]},{"type":"text","value":" but rather via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useCookies(event)"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You do not need to pass in any further parameters like "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secureCookie"}]},{"type":"text","value":", ... They are automatically inferred to the values you configured if not set and reading the token will work out of the box. You "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"may"}]},{"type":"text","value":" pass these options, e.g., to get the raw, encoded JWT token you can pass "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"raw: true"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"application-side-jwt-token-access"},"children":[{"type":"text","value":"Application-side JWT token access"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To access the JWT token application-side, e.g., in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".vue"}]},{"type":"text","value":" page, you can create an endpoint like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(event => getToken({ event }))\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(event => getToken({ event }))\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then from your application-side code you can fetch it like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: app.vue\n<template>\n  <div>{{ token || 'no token present, are you logged in?' }}</div>\n</template>\n\n<script setup lang=\"ts\">\nconst headers = useRequestHeaders(['cookie'])\nconst { data: token } = await useFetch('/api/token', { headers: { cookie: headers.cookie } })\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: app.vue\n<template>\n  <div>{{ token || 'no token present, are you logged in?' }}</div>\n</template>\n\n<script setup lang=\"ts\">\nconst headers = useRequestHeaders(['cookie'])\nconst { data: token } = await useFetch('/api/token', { headers: { cookie: headers.cookie } })\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that you have to pass the cookie-header manually. You also have to pass it using "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/api/composables/use-request-headers/","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useRequestHeaders"}]}]},{"type":"text","value":" so that the cookies are also correctly passed when this page is rendered server-side during the "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/concepts/rendering#universal-rendering","rel":["nofollow"]},"children":[{"type":"text","value":"universal-rendering process"}]},{"type":"text","value":"."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"server-side-usage"},"children":[{"type":"text","value":"Server-side usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On the server side you can get access to the current session like this:"}]},{"type":"element","tag":"code","props":{"code":"import { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd5c5"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is inspired by "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/tutorials/securing-pages-and-api-routes#securing-api-routes","rel":["nofollow"]},"children":[{"type":"text","value":"the getServerSession"}]},{"type":"text","value":" of NextAuth.js. It also avoids an external, internet call to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET /api/auth/sessions"}]},{"type":"text","value":" endpoint, instead directly calling a pure JS-method."}]},{"type":"element","tag":"h2","props":{"id":"server-side-endpoint-protection"},"children":[{"type":"text","value":"Server-side endpoint protection"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To protect an endpoint with, check the session after fetching it:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/protected.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    return { status: 'unauthenticated!' }\n  }\n  return { status: 'authenticated!' }\n})\n\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f9d00"},"children":[{"type":"text","value":"// file: ~/server/api/protected.get.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd5c5"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'unauthenticated!'"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'authenticated!'"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"server-side-middleware"},"children":[{"type":"text","value":"Server-side middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also use this in a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#server-middleware","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt server middleware"}]},{"type":"text","value":" to protect multiple pages at once and keep the authentication logic out of your endpoints:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/middleware/auth.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    throw createError({ statusMessage: 'Unauthenticated', statusCode: 403 })\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f9d00"},"children":[{"type":"text","value":"// file: ~/server/middleware/auth.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd5c5"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"createError"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"statusMessage"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'Unauthenticated'"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"statusCode"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-0c8b64"},"children":[{"type":"text","value":"403"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-the-jwt-token"},"children":[{"type":"text","value":"Getting the JWT Token"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Getting the (decoded) JWT token of the current user can be helpful, e.g., to use it to access an external api that requires this token for authentication or authorization."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can get the JWT token that was passed along with the request using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getToken"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const token = await getToken({ event })\n\n  return token || 'no token present'\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f9d00"},"children":[{"type":"text","value":"// file: ~/server/api/token.get.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd5c5"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'no token present'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The function behaves identical to the "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/tutorials/securing-pages-and-api-routes#using-gettoken","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getToken"}]},{"type":"text","value":" function from NextAuth.js"}]},{"type":"text","value":" with one change: you have to pass in the h3-"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"event"}]},{"type":"text","value":" instead of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"req"}]},{"type":"text","value":". This is due to how cookies can be accessed on h3: not via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"req.cookies"}]},{"type":"text","value":" but rather via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useCookies(event)"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You do not need to pass in any further parameters like "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secureCookie"}]},{"type":"text","value":", ... They are automatically inferred to the values you configured if not set and reading the token will work out of the box. You "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"may"}]},{"type":"text","value":" pass these options, e.g., to get the raw, encoded JWT token you can pass "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"raw: true"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"application-side-jwt-token-access"},"children":[{"type":"text","value":"Application-side JWT token access"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To access the JWT token application-side, e.g., in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".vue"}]},{"type":"text","value":" page, you can create an endpoint like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(event => getToken({ event }))\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-5f9d00"},"children":[{"type":"text","value":"// file: ~/server/api/token.get.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" }))"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then from your application-side code you can fetch it like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: app.vue\n<template>\n  <div>{{ token || 'no token present, are you logged in?' }}</div>\n</template>\n\n<script setup lang=\"ts\">\nconst headers = useRequestHeaders(['cookie'])\nconst { data: token } = await useFetch('/api/token', { headers: { cookie: headers.cookie } })\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"// file: app.vue"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-0c8b64"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":">{{ "}]},{"type":"element","tag":"span","props":{"class":"ct-0c8b64"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" || "}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'no token present, are you logged in?'"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-0c8b64"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c8b64"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c8b64"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd5c5"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"useRequestHeaders"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd5c5"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-77b056"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-849a36"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-39c6d2"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-82da84"},"children":[{"type":"text","value":"'/api/token'"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":": { "}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"cookie"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-2dd5c5"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"cookie"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":" } })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-d4d8fc"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-4356fb"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that you have to pass the cookie-header manually. You also have to pass it using "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/api/composables/use-request-headers/","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useRequestHeaders"}]}]},{"type":"text","value":" so that the cookies are also correctly passed when this page is rendered server-side during the "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/concepts/rendering#universal-rendering","rel":["nofollow"]},"children":[{"type":"text","value":"universal-rendering process"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-0c8b64{color:#D19A66}.ct-5f9d00{color:#7F848E}.ct-77b056{color:#56B6C2}.ct-2dd5c5{color:#E5C07B}.ct-39c6d2{color:#61AFEF}.ct-82da84{color:#98C379}.ct-d4d8fc{color:#E06C75}.ct-4356fb{color:#ABB2BF}.ct-849a36{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"server-side-endpoint-protection","depth":2,"text":"Server-side endpoint protection"},{"id":"server-side-middleware","depth":2,"text":"Server-side middleware"},{"id":"getting-the-jwt-token","depth":2,"text":"Getting the JWT Token","children":[{"id":"application-side-jwt-token-access","depth":3,"text":"Application-side JWT token access"}]}]}},"_type":"markdown","_id":"content:2.guide:4.usage:1.server-side.md","_source":"content","_file":"2.guide/4.usage/1.server-side.md","_extension":"md"},{"_path":"/guide/usage/rest-api","_dir":"usage","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"REST API","description":"All endpoints that NextAuth.js supports are also supported by nuxt-auth:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rest-api"},"children":[{"type":"text","value":"REST API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All endpoints that NextAuth.js supports are also supported by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":":"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Request"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signin/:provider"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/callback/:provider"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signout"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/session"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/csrf"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/providers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can directly interact with them if you wish to, it's probably a better idea to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" where possible though. "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/getting-started/rest-api","rel":["nofollow"]},"children":[{"type":"text","value":"See the full rest API documentation of NextAuth.js here"}]},{"type":"text","value":"."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rest-api"},"children":[{"type":"text","value":"REST API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All endpoints that NextAuth.js supports are also supported by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":":"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Request"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signin/:provider"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/callback/:provider"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signout"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/session"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/csrf"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/providers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can directly interact with them if you wish to, it's probably a better idea to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" where possible though. "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/getting-started/rest-api","rel":["nofollow"]},"children":[{"type":"text","value":"See the full rest API documentation of NextAuth.js here"}]},{"type":"text","value":"."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:4.usage:2.REST-API.md","_source":"content","_file":"2.guide/4.usage/2.REST-API.md","_extension":"md"},{"_path":"/guide/examples/_dir","_dir":"examples","_draft":false,"_partial":true,"_locale":"en","title":"Examples","icon":"heroicons-outline:play","_id":"content:2.guide:5.examples:_dir.yml","_type":"yaml","_source":"content","_file":"2.guide/5.examples/_dir.yml","_extension":"yml"},{"_path":"/guide/examples/simple","_dir":"examples","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Simple","description":"Minimal example of using nuxt-auth.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"basic-nuxt-auth-example"},"children":[{"type":"text","value":"Basic nuxt-auth example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Minimal example of using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":"."}]},{"type":"element","tag":"read-more","props":{"link":"/get-started"},"children":[]},{"type":"element","tag":"sandbox","props":{"branch":"main","dir":"playground","file":"app.vue","repo":"sidebase/nuxt-auth"},"children":[]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"basic-nuxt-auth-example"},"children":[{"type":"text","value":"Basic nuxt-auth example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Minimal example of using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":"."}]},{"type":"element","tag":"read-more","props":{"link":"/get-started"},"children":[]},{"type":"element","tag":"sandbox","props":{"branch":"main","dir":"playground","file":"app.vue","repo":"sidebase/nuxt-auth"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:5.examples:0.simple.md","_source":"content","_file":"2.guide/5.examples/0.simple.md","_extension":"md"},{"_path":"/guide/examples/advanced","_dir":"examples","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Advanced","description":"Advanced example of using nuxt-auth.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"advanced-nuxt-auth-example"},"children":[{"type":"text","value":"Advanced nuxt-auth example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Advanced example of using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":"."}]},{"type":"element","tag":"read-more","props":{"link":"/get-started"},"children":[]},{"type":"element","tag":"sandbox","props":{"branch":"main","dir":"/","file":"app.vue","repo":"sidebase/nuxt-auth-example"},"children":[]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"advanced-nuxt-auth-example"},"children":[{"type":"text","value":"Advanced nuxt-auth example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Advanced example of using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":"."}]},{"type":"element","tag":"read-more","props":{"link":"/get-started"},"children":[]},{"type":"element","tag":"sandbox","props":{"branch":"main","dir":"/","file":"app.vue","repo":"sidebase/nuxt-auth-example"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:2.guide:5.examples:1.advanced.md","_source":"content","_file":"2.guide/5.examples/1.advanced.md","_extension":"md"},{"_path":"/demo-page","_dir":"","_draft":false,"_partial":false,"_locale":"en","_empty":true,"title":"Demo Page","description":"","excerpt":{"type":"root","children":[]},"icon":"heroicons-outline:beaker","redirect":"https://nuxt-auth-example.sidebase.io","body":{"type":"root","children":[],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.demo-page.md","_source":"content","_file":"3.demo-page.md","_extension":"md"},{"_path":"/nuxt-session/_dir","_dir":"nuxt-session","_draft":false,"_partial":true,"_locale":"en","title":"nuxt-session","icon":"heroicons-outline:document","_id":"content:3.nuxt-session:_dir.yml","_type":"yaml","_source":"content","_file":"3.nuxt-session/_dir.yml","_extension":"yml"},{"_path":"/nuxt-session","_dir":"","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Welcome","description":"Supercharging the Nuxt3 developer experience with high quality modules and tools!","excerpt":{"type":"root","children":[{"type":"element","tag":"block-hero","props":{":cta":"[\"Get started\",\"/nuxt-session/welcome/getting-started\"]",":secondary":"[\"Star on GitHub\",\"https://github.com/sidebase/nuxt-session\"]","snippet":"npm install -D @sidebase/nuxt-session"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"announcement-button","props":{"label":"We just released version 0.2.5 of nuxt-session!","to":"/test"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt3 session management"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Supercharging the Nuxt3 developer experience with high quality modules and tools!"}]}]}]},{"type":"element","tag":"card-grid","props":{},"children":[{"type":"element","tag":"card","props":{"icon":"heroicons-outline:users"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Countless providers"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By using NextAuth we already support most oAuth providers out of the box!"}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:globe-alt"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Universal Auth Composable"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We integrate NextAuth directly into Vue, giving you access to authentication data and functions in your app!"}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:document"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Persistent sessions across requests"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-session"}]},{"type":"text","value":" your users will not have to sign in every time they access your page."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:shield-check"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application-side middleware protection"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Protect selected pages or your entire app through Nuxt3 middleware."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:server-stack"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Server-side middleware and endpoint protection"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Protect the content on your website. Your NodeJS server will automatically check users' status in the backend."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:rectangle-stack"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"REST-API"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Want to do it yourself? We offer a full REST-API with all the endpoints you need!"}]}]}]}]}]},"navigation":false,"layout":"page","body":{"type":"root","children":[{"type":"element","tag":"block-hero","props":{":cta":"[\"Get started\",\"/nuxt-session/welcome/getting-started\"]",":secondary":"[\"Star on GitHub\",\"https://github.com/sidebase/nuxt-session\"]","snippet":"npm install -D @sidebase/nuxt-session"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"announcement-button","props":{"label":"We just released version 0.2.5 of nuxt-session!","to":"/test"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt3 session management"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Supercharging the Nuxt3 developer experience with high quality modules and tools!"}]}]}]},{"type":"element","tag":"card-grid","props":{},"children":[{"type":"element","tag":"card","props":{"icon":"heroicons-outline:users"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Countless providers"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By using NextAuth we already support most oAuth providers out of the box!"}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:globe-alt"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Universal Auth Composable"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We integrate NextAuth directly into Vue, giving you access to authentication data and functions in your app!"}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:document"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Persistent sessions across requests"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-session"}]},{"type":"text","value":" your users will not have to sign in every time they access your page."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:shield-check"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application-side middleware protection"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Protect selected pages or your entire app through Nuxt3 middleware."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:server-stack"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Server-side middleware and endpoint protection"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Protect the content on your website. Your NodeJS server will automatically check users' status in the backend."}]}]}]},{"type":"element","tag":"card","props":{"icon":"heroicons-outline:rectangle-stack"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"REST-API"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Want to do it yourself? We offer a full REST-API with all the endpoints you need!"}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:1.index.md","_source":"content","_file":"3.nuxt-session/1.index.md","_extension":"md"},{"_path":"/nuxt-session/welcome/_dir","_dir":"welcome","_draft":false,"_partial":true,"_locale":"en","title":"Welcome","icon":"heroicons-outline:bolt","_id":"content:3.nuxt-session:1.welcome:_dir.yml","_type":"yaml","_source":"content","_file":"3.nuxt-session/1.welcome/_dir.yml","_extension":"yml"},{"_path":"/nuxt-session/welcome/getting-started","_dir":"welcome","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Getting started","description":"Install the package:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install the package:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"npm i -D @sidebase/nuxt-session\n","filename":"NPM","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm i -D @sidebase/nuxt-session\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn add @sidebase/nuxt-session --dev\n","filename":"Yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yarn add @sidebase/nuxt-session --dev\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Add the package to your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\n   modules: ['@sidebase/nuxt-session'],\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default defineNuxtConfig({\n   modules: ['@sidebase/nuxt-session'],\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Done! Each client will now have a unique session you can access on the server- and client side:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"// file: any .vue file\nconst { session, refresh, update, reset } = await useSession()\n\n// Reactive session object that updates after methods calls below\nsession.value\n\n// Refresh the session\nawait refresh()\n\n// Update the session with arbitrary data\nawait update({ test: 123 })\n\n// Get a new session, all data will be lost, the session id and creation time will change\nawait reset()\n","filename":"Client side","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: any .vue file\nconst { session, refresh, update, reset } = await useSession()\n\n// Reactive session object that updates after methods calls below\nsession.value\n\n// Refresh the session\nawait refresh()\n\n// Update the session with arbitrary data\nawait update({ test: 123 })\n\n// Get a new session, all data will be lost, the session id and creation time will change\nawait reset()\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"// file: e.g: ~/server/api/ files\nimport { eventHandler } from 'h3'\n\n// Return all session data to the frontend\nexport default eventHandler(event => event.context.session)\n","filename":"Server side","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: e.g: ~/server/api/ files\nimport { eventHandler } from 'h3'\n\n// Return all session data to the frontend\nexport default eventHandler(event => event.context.session)\n"}]}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting started"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Install the package:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"npm i -D @sidebase/nuxt-session\n","filename":"NPM","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"npm i -D @sidebase/nuxt-session"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn add @sidebase/nuxt-session --dev\n","filename":"Yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"yarn add @sidebase/nuxt-session --dev"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Add the package to your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\n   modules: ['@sidebase/nuxt-session'],\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94550a"},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"   "}]},{"type":"element","tag":"span","props":{"class":"ct-a3f27e"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-76caca"},"children":[{"type":"text","value":"'@sidebase/nuxt-session'"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Done! Each client will now have a unique session you can access on the server- and client side:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"// file: any .vue file\nconst { session, refresh, update, reset } = await useSession()\n\n// Reactive session object that updates after methods calls below\nsession.value\n\n// Refresh the session\nawait refresh()\n\n// Update the session with arbitrary data\nawait update({ test: 123 })\n\n// Get a new session, all data will be lost, the session id and creation time will change\nawait reset()\n","filename":"Client side","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6a798"},"children":[{"type":"text","value":"// file: any .vue file"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-a12834"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a12834"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a12834"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a12834"},"children":[{"type":"text","value":"reset"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-f7975b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94550a"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6a798"},"children":[{"type":"text","value":"// Reactive session object that updates after methods calls below"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a12834"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a3f27e"},"children":[{"type":"text","value":"value"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6a798"},"children":[{"type":"text","value":"// Refresh the session"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94550a"},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6a798"},"children":[{"type":"text","value":"// Update the session with arbitrary data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94550a"},"children":[{"type":"text","value":"update"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-a3f27e"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8e61cd"},"children":[{"type":"text","value":"123"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6a798"},"children":[{"type":"text","value":"// Get a new session, all data will be lost, the session id and creation time will change"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94550a"},"children":[{"type":"text","value":"reset"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"()"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"// file: e.g: ~/server/api/ files\nimport { eventHandler } from 'h3'\n\n// Return all session data to the frontend\nexport default eventHandler(event => event.context.session)\n","filename":"Server side","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6a798"},"children":[{"type":"text","value":"// file: e.g: ~/server/api/ files"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-a3f27e"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-76caca"},"children":[{"type":"text","value":"'h3'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a6a798"},"children":[{"type":"text","value":"// Return all session data to the frontend"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-94550a"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-a3f27e"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-079f5f"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12834"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a12834"},"children":[{"type":"text","value":"context"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a3f27e"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-c563f1"},"children":[{"type":"text","value":")"}]}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-8e61cd{color:#D19A66}.ct-f7975b{color:#56B6C2}.ct-a12834{color:#E5C07B}.ct-a6a798{color:#7F848E}.ct-76caca{color:#98C379}.ct-a3f27e{color:#E06C75}.ct-94550a{color:#61AFEF}.ct-079f5f{color:#C678DD}.ct-c563f1{color:#ABB2BF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:1.welcome:1.getting-started.md","_source":"content","_file":"3.nuxt-session/1.welcome/1.getting-started.md","_extension":"md"},{"_path":"/nuxt-session/welcome/features","_dir":"welcome","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Features","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"features"},"children":[{"type":"text","value":"Features"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Persistent sessions across requests using cookies"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useSession composable for client side session-interaction"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurable session endpoints out of the box:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" /api/session: Get the current session"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DELETE"}]},{"type":"text","value":" /api/session: Delete the current session"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":" /api/session: Overwrite the current session data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PATCH"}]},{"type":"text","value":" /api/session: Add to the current session data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Storage via unjs/unstorage - use memory, redis, fs, cloudflare-kv, ... drivers to store your session data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Automatic session and storage cleanup on expiry"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"features"},"children":[{"type":"text","value":"Features"}]},{"type":"element","tag":"list","props":{"type":"success"},"children":[{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Persistent sessions across requests using cookies"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"useSession composable for client side session-interaction"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configurable session endpoints out of the box:"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" /api/session: Get the current session"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"DELETE"}]},{"type":"text","value":" /api/session: Delete the current session"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]},{"type":"text","value":" /api/session: Overwrite the current session data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"PATCH"}]},{"type":"text","value":" /api/session: Add to the current session data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Storage via unjs/unstorage - use memory, redis, fs, cloudflare-kv, ... drivers to store your session data"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Automatic session and storage cleanup on expiry"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:1.welcome:2.features.md","_source":"content","_file":"3.nuxt-session/1.welcome/2.features.md","_extension":"md"},{"_path":"/nuxt-session/welcome/playground","_dir":"welcome","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Playground","description":"See the playground to interactively use nuxt-session:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"playground"},"children":[{"type":"text","value":"Playground"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See the playground to interactively use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-session"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"git clone https://github.com/sidebase/nuxt-session\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"git clone https://github.com/sidebase/nuxt-session\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"cd nuxt-session\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"cd nuxt-session\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"npm i\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm i\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"npm run dev:prepare\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm run dev:prepare\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"npm run dev\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm run dev\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"open "},{"type":"element","tag":"a","props":{"href":"http://localhost:3000","rel":["nofollow"]},"children":[{"type":"text","value":"http://localhost:3000"}]}]}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"playground"},"children":[{"type":"text","value":"Playground"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See the playground to interactively use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-session"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"git clone https://github.com/sidebase/nuxt-session\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-248259"},"children":[{"type":"text","value":"git clone https://github.com/sidebase/nuxt-session"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"cd nuxt-session\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-340296"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"class":"ct-248259"},"children":[{"type":"text","value":" nuxt-session"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"npm i\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-248259"},"children":[{"type":"text","value":"npm i"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"npm run dev:prepare\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-248259"},"children":[{"type":"text","value":"npm run dev:prepare"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"npm run dev\n","language":"sh"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-248259"},"children":[{"type":"text","value":"npm run dev"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"open "},{"type":"element","tag":"a","props":{"href":"http://localhost:3000","rel":["nofollow"]},"children":[{"type":"text","value":"http://localhost:3000"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-340296{color:#56B6C2}.ct-248259{color:#ABB2BF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:1.welcome:3.playground.md","_source":"content","_file":"3.nuxt-session/1.welcome/3.playground.md","_extension":"md"},{"_path":"/nuxt-session/configuration/_dir","_dir":"configuration","_draft":false,"_partial":true,"_locale":"en","title":"Configuration","icon":"heroicons-outline:cog","_id":"content:3.nuxt-session:2.configuration:_dir.yml","_type":"yaml","_source":"content","_file":"3.nuxt-session/2.configuration/_dir.yml","_extension":"yml"},{"_path":"/nuxt-session/configuration","_dir":"nuxt-session","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Glossary","description":"The nuxt-auth module takes care of authentication and sessions.\nThere are some terms we use in this documentation that may not immediately be known to every reader. Here is an explanation for some of them:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"glossary"},"children":[{"type":"text","value":"Glossary"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The nuxt-auth module takes care of authentication and sessions.\nThere are some terms we use in this documentation that may not immediately be known to every reader. Here is an explanation for some of them:"}]},{"type":"element","tag":"h5","props":{"id":"-authentication"},"children":[{"type":"text","value":"🔑 authentication"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The process of ensuring that somebody is who they claims to be, e.g., via a username and password or by trusting an external authority (e.g., oauth via google, amazon, ...)"}]},{"type":"element","tag":"h5","props":{"id":"-sessions"},"children":[{"type":"text","value":"👤 sessions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Persist the information that you have been authenticated for some duration across different requests. Additional data can be attached to a session, e.g., a username. (Note: If you need only sessions but no authentication, you can check-out nuxt-session)"}]},{"type":"element","tag":"h5","props":{"id":"-application--application-side--universal-application"},"children":[{"type":"text","value":"💻 application / application-side / universal-application"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This references all Nuxt code of your app that is universally rendered. In short this means that that code is rendered on the server-side and on the client-side, so all JS in it is executed twice. This is an important distinction, as some things may behave different on the server-side than on the client-side. We use application... to denote something that will be universally rendered"}]},{"type":"element","tag":"h5","props":{"id":"-server--server-side"},"children":[{"type":"text","value":"💾 server / server-side"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This references all Nuxt code of your app that will run only on your server. For example, all code inside the ~/server directory should only ever run on the server"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"glossary"},"children":[{"type":"text","value":"Glossary"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The nuxt-auth module takes care of authentication and sessions.\nThere are some terms we use in this documentation that may not immediately be known to every reader. Here is an explanation for some of them:"}]},{"type":"element","tag":"h5","props":{"id":"-authentication"},"children":[{"type":"text","value":"🔑 authentication"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The process of ensuring that somebody is who they claims to be, e.g., via a username and password or by trusting an external authority (e.g., oauth via google, amazon, ...)"}]},{"type":"element","tag":"h5","props":{"id":"-sessions"},"children":[{"type":"text","value":"👤 sessions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Persist the information that you have been authenticated for some duration across different requests. Additional data can be attached to a session, e.g., a username. (Note: If you need only sessions but no authentication, you can check-out nuxt-session)"}]},{"type":"element","tag":"h5","props":{"id":"-application--application-side--universal-application"},"children":[{"type":"text","value":"💻 application / application-side / universal-application"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This references all Nuxt code of your app that is universally rendered. In short this means that that code is rendered on the server-side and on the client-side, so all JS in it is executed twice. This is an important distinction, as some things may behave different on the server-side than on the client-side. We use application... to denote something that will be universally rendered"}]},{"type":"element","tag":"h5","props":{"id":"-server--server-side"},"children":[{"type":"text","value":"💾 server / server-side"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This references all Nuxt code of your app that will run only on your server. For example, all code inside the ~/server directory should only ever run on the server"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:2.configuration:0.index.md","_source":"content","_file":"3.nuxt-session/2.configuration/0.index.md","_extension":"md"},{"_path":"/nuxt-session/configuration/nuxt-config","_dir":"configuration","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Nuxt Config","description":"Learn how to configure nuxt-auth inside of the nuxt-config.ts","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxtconfigts"},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth"}]},{"type":"text","value":"-key inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":" to configure the module itself. Right now this is limited to the following options:"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\n  modules: ['@sidebase/nuxt-auth'],\n  auth: {\n    // The module is enabled. Change this to disable the module\n    isEnabled: true,\n\n    // The origin is set to the development origin. Change this when deploying to production\n    origin: 'http://localhost:300',\n\n    // The base path to the authentication endpoints. Change this if you want to add your auth-endpoints at a non-default location\n    basePath: '/api/auth'\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"export default defineNuxtConfig({\n  modules: ['@sidebase/nuxt-auth'],\n  auth: {\n    // The module is enabled. Change this to disable the module\n    isEnabled: true,\n\n    // The origin is set to the development origin. Change this when deploying to production\n    origin: 'http://localhost:300',\n\n    // The base path to the authentication endpoints. Change this if you want to add your auth-endpoints at a non-default location\n    basePath: '/api/auth'\n  }\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":" together are equivalent to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_URL"}]},{"type":"text","value":" environment variable of NextAuth.js"}]},{"type":"element","tag":"h2","props":{"id":"origin"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"You must set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" in production, this includes when you run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":"!"}]},{"type":"text","value":" This is so that "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":" can ensure that callbacks for authentication are correct. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" consists out of (up to) 3 parts:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"scheme: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host: e.g., "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"example.org"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"www.sidebase.io"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"port: e.g., "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":3000"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":4444"}]},{"type":"text","value":"; leave empty to implicitly set "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":80"}]},{"type":"text","value":" (this is an internet convention, don't ask)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For "},{"type":"element","tag":"a","props":{"href":"https://nuxt-auth-example.sidebase.io","rel":["nofollow"]},"children":[{"type":"text","value":"the demo-app"}]},{"type":"text","value":" we set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://nuxt-auth-example.sidebase.io"}]},{"type":"text","value":". If for some reason required, you can explicitly set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000"}]},{"type":"text","value":" to stop "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":" from aborting "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" when the origin is unset."}]},{"type":"element","tag":"h2","props":{"id":"basepath"},"children":[{"type":"text","value":"basePath"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is what tells the module where you added the authentication endpoints. Per default the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/auth"}]},{"type":"text","value":", so that means that the module expects that all requests to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/auth/*"}]},{"type":"text","value":" will be handled by the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To statify this, you need to create a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#catch-all-route","rel":["nofollow"]},"children":[{"type":"text","value":"catch-all server-route"}]},{"type":"text","value":" at that location by creating a file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/auth/[...].ts"}]},{"type":"text","value":" that exports the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":", see more on this in the "},{"type":"element","tag":"a","props":{"href":"#quick-start"},"children":[{"type":"text","value":"Quick Start"}]},{"type":"text","value":" or in the "},{"type":"element","tag":"a","props":{"href":"#serverapiauthts"},"children":[{"type":"text","value":"configuration section below"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to have the authentication at another location, you can overwrite the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":", e.g., when setting:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath: \"/api/_auth\""}]},{"type":"text","value":" -> add the authentication catch-all endpoints into "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/_auth/[...].ts"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath: \"/_auth\""}]},{"type":"text","value":" -> add the authentication catch-all endpoints into "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/routes/_auth/[...].ts"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server/#server-routes","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt server-routes docs on this"}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"h2","props":{"id":"nuxtauthhandler"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler({ ... })"}]},{"type":"text","value":" to configure how the authentication itself behaves:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // your authentication configuration here!\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // your authentication configuration here!\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":" accepts "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/configuration/options#options","rel":["nofollow"]},"children":[{"type":"text","value":"all options that NextAuth.js accepts for its API initialization"}]},{"type":"text","value":". Use this place to configure authentication providers (oauth-google, credential flow, ...), your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":" (equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_SECRET"}]},{"type":"text","value":" in NextAuth.js), add callbacks for authentication events, configure a custom logger and more. Read the linked "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":" configuration to figure out how this works and what you can do."}]}]},"toc":true,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxtconfigts"},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth"}]},{"type":"text","value":"-key inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":" to configure the module itself. Right now this is limited to the following options:"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\n  modules: ['@sidebase/nuxt-auth'],\n  auth: {\n    // The module is enabled. Change this to disable the module\n    isEnabled: true,\n\n    // The origin is set to the development origin. Change this when deploying to production\n    origin: 'http://localhost:300',\n\n    // The base path to the authentication endpoints. Change this if you want to add your auth-endpoints at a non-default location\n    basePath: '/api/auth'\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4c7675"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4c7675"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-36700e"},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d597"},"children":[{"type":"text","value":"modules"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"class":"ct-f22316"},"children":[{"type":"text","value":"'@sidebase/nuxt-auth'"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"],"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d597"},"children":[{"type":"text","value":"auth"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-21a310"},"children":[{"type":"text","value":"// The module is enabled. Change this to disable the module"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d597"},"children":[{"type":"text","value":"isEnabled"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-9b3008"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-21a310"},"children":[{"type":"text","value":"// The origin is set to the development origin. Change this when deploying to production"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d597"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f22316"},"children":[{"type":"text","value":"'http://localhost:300'"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-21a310"},"children":[{"type":"text","value":"// The base path to the authentication endpoints. Change this if you want to add your auth-endpoints at a non-default location"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d597"},"children":[{"type":"text","value":"basePath"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-f22316"},"children":[{"type":"text","value":"'/api/auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":" together are equivalent to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_URL"}]},{"type":"text","value":" environment variable of NextAuth.js"}]},{"type":"element","tag":"h2","props":{"id":"origin"},"children":[{"type":"text","value":"origin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"You must set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" in production, this includes when you run "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":"!"}]},{"type":"text","value":" This is so that "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":" can ensure that callbacks for authentication are correct. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" consists out of (up to) 3 parts:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"scheme: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http"}]},{"type":"text","value":" or "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host: e.g., "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"localhost"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"example.org"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"www.sidebase.io"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"port: e.g., "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":3000"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":4444"}]},{"type":"text","value":"; leave empty to implicitly set "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":80"}]},{"type":"text","value":" (this is an internet convention, don't ask)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For "},{"type":"element","tag":"a","props":{"href":"https://nuxt-auth-example.sidebase.io","rel":["nofollow"]},"children":[{"type":"text","value":"the demo-app"}]},{"type":"text","value":" we set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://nuxt-auth-example.sidebase.io"}]},{"type":"text","value":". If for some reason required, you can explicitly set the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"origin"}]},{"type":"text","value":" to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://localhost:3000"}]},{"type":"text","value":" to stop "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":" from aborting "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" when the origin is unset."}]},{"type":"element","tag":"h2","props":{"id":"basepath"},"children":[{"type":"text","value":"basePath"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is what tells the module where you added the authentication endpoints. Per default the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/auth"}]},{"type":"text","value":", so that means that the module expects that all requests to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/api/auth/*"}]},{"type":"text","value":" will be handled by the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To statify this, you need to create a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#catch-all-route","rel":["nofollow"]},"children":[{"type":"text","value":"catch-all server-route"}]},{"type":"text","value":" at that location by creating a file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/auth/[...].ts"}]},{"type":"text","value":" that exports the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":", see more on this in the "},{"type":"element","tag":"a","props":{"href":"#quick-start"},"children":[{"type":"text","value":"Quick Start"}]},{"type":"text","value":" or in the "},{"type":"element","tag":"a","props":{"href":"#serverapiauthts"},"children":[{"type":"text","value":"configuration section below"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to have the authentication at another location, you can overwrite the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":", e.g., when setting:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath: \"/api/_auth\""}]},{"type":"text","value":" -> add the authentication catch-all endpoints into "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/_auth/[...].ts"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"basePath: \"/_auth\""}]},{"type":"text","value":" -> add the authentication catch-all endpoints into "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/routes/_auth/[...].ts"}]},{"type":"text","value":" (see "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server/#server-routes","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt server-routes docs on this"}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"h2","props":{"id":"nuxtauthhandler"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler({ ... })"}]},{"type":"text","value":" to configure how the authentication itself behaves:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/auth/[...].ts\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // your authentication configuration here!\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-21a310"},"children":[{"type":"text","value":"// file: ~/server/api/auth/[...].ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4c7675"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-b8d597"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-4c7675"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f22316"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4c7675"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4c7675"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-36700e"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-21a310"},"children":[{"type":"text","value":"// your authentication configuration here!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-45cc74"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":" accepts "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/configuration/options#options","rel":["nofollow"]},"children":[{"type":"text","value":"all options that NextAuth.js accepts for its API initialization"}]},{"type":"text","value":". Use this place to configure authentication providers (oauth-google, credential flow, ...), your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":" (equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_SECRET"}]},{"type":"text","value":" in NextAuth.js), add callbacks for authentication events, configure a custom logger and more. Read the linked "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":" configuration to figure out how this works and what you can do."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-9b3008{color:#D19A66}.ct-21a310{color:#7F848E}.ct-f22316{color:#98C379}.ct-b8d597{color:#E06C75}.ct-36700e{color:#61AFEF}.ct-45cc74{color:#ABB2BF}.ct-4c7675{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"origin","depth":2,"text":"origin"},{"id":"basepath","depth":2,"text":"basePath"},{"id":"nuxtauthhandler","depth":2,"text":"NuxtAuthHandler"}]}},"_type":"markdown","_id":"content:3.nuxt-session:2.configuration:1.nuxt-config.md","_source":"content","_file":"3.nuxt-session/2.configuration/1.nuxt-config.md","_extension":"md"},{"_path":"/nuxt-session/configuration/nuxt-auth-handler","_dir":"configuration","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"NuxtAuthHandler","description":"Learn how to configure nuxt-auth with the NuxtAuthHandler","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxtauthhandler"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After setting up nuxt-auth inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-config.ts"}]},{"type":"text","value":" you can begin defining providers and other options inside your NuxtAuthHandler."}]},{"type":"element","tag":"h2","props":{"id":"creating-a-new-nuxtauthhandler"},"children":[{"type":"text","value":"Creating a new NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to create your own "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHanlder"}]},{"type":"text","value":", create the file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/auth/[...].ts"}]},{"type":"text","value":". This file will automatically intercept all\nrequests going to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://localhost/api/auth"}]},{"type":"text","value":" and inject the authentication api. If you wish you can also use a custom api path, however this change will need to be\nreflected in the "},{"type":"element","tag":"a","props":{"href":"/nuxt-auth/configuration/nuxt-config#basepath"},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":", which is configured in the "},{"type":"element","tag":"a","props":{"href":"/nuxt-auth/configuration/nuxt-config"},"children":[{"type":"text","value":"nuxt-config.ts"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"configuring-your-nuxtauthhandler"},"children":[{"type":"text","value":"Configuring your NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler({ ... })"}]},{"type":"text","value":" to configure how the authentication itself behaves:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"import { NuxtAuthHandler } from '#auth'\n    \nexport default NuxtAuthHandler({\n    // your authentication configuration here!\n})\n","filename":"Simple NuxtAuthHandler","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { NuxtAuthHandler } from '#auth'\n    \nexport default NuxtAuthHandler({\n    // your authentication configuration here!\n})\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"import CredentialsProvider from 'next-auth/providers/credentials'\nimport GithubProvider from 'next-auth/providers/github'\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // A secret string you define, to ensure correct encryption  \n  secret: 'your-secret-here',  \n  providers: [\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    GithubProvider.default({\n      clientId: 'your-client-id',\n      clientSecret: 'your-client-secret'\n    }),\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    CredentialsProvider.default({\n      // The name to display on the sign in form (e.g. 'Sign in with...')\n      name: 'Credentials',\n      // The credentials is used to generate a suitable form on the sign in page.\n      // You can specify whatever fields you are expecting to be submitted.\n      // e.g. domain, username, password, 2FA token, etc.\n      // You can pass any HTML attribute to the <input> tag through the object.\n      credentials: {\n        username: { label: 'Username', type: 'text', placeholder: '(hint: jsmith)' },\n        password: { label: 'Password', type: 'password', placeholder: '(hint: hunter2)' }\n      },\n      authorize (credentials: any) {\n        // You need to provide your own logic here that takes the credentials\n        // submitted and returns either a object representing a user or value\n        // that is false/null if the credentials are invalid.\n        // NOTE: THE BELOW LOGIC IS NOT SAFE OR PROPER FOR AUTHENTICATION!\n\n        const user = { id: '1', name: 'J Smith', username: 'jsmith', password: 'hunter2' }\n\n        if (credentials?.username === user.username && credentials?.password === user.password) {\n          // Any object returned will be saved in `user` property of the JWT\n          return user\n        } else {\n          // eslint-disable-next-line no-console\n          console.error('Warning: Malicious login attempt registered, bad credentials provided')\n\n          // If you return null then an error will be displayed advising the user to check their details.\n          return null\n\n          // You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter\n        }\n      }\n    })\n  ]\n})\n","filename":"Full NuxtAuthHandler","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import CredentialsProvider from 'next-auth/providers/credentials'\nimport GithubProvider from 'next-auth/providers/github'\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // A secret string you define, to ensure correct encryption  \n  secret: 'your-secret-here',  \n  providers: [\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    GithubProvider.default({\n      clientId: 'your-client-id',\n      clientSecret: 'your-client-secret'\n    }),\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    CredentialsProvider.default({\n      // The name to display on the sign in form (e.g. 'Sign in with...')\n      name: 'Credentials',\n      // The credentials is used to generate a suitable form on the sign in page.\n      // You can specify whatever fields you are expecting to be submitted.\n      // e.g. domain, username, password, 2FA token, etc.\n      // You can pass any HTML attribute to the <input> tag through the object.\n      credentials: {\n        username: { label: 'Username', type: 'text', placeholder: '(hint: jsmith)' },\n        password: { label: 'Password', type: 'password', placeholder: '(hint: hunter2)' }\n      },\n      authorize (credentials: any) {\n        // You need to provide your own logic here that takes the credentials\n        // submitted and returns either a object representing a user or value\n        // that is false/null if the credentials are invalid.\n        // NOTE: THE BELOW LOGIC IS NOT SAFE OR PROPER FOR AUTHENTICATION!\n\n        const user = { id: '1', name: 'J Smith', username: 'jsmith', password: 'hunter2' }\n\n        if (credentials?.username === user.username && credentials?.password === user.password) {\n          // Any object returned will be saved in `user` property of the JWT\n          return user\n        } else {\n          // eslint-disable-next-line no-console\n          console.error('Warning: Malicious login attempt registered, bad credentials provided')\n\n          // If you return null then an error will be displayed advising the user to check their details.\n          return null\n\n          // You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter\n        }\n      }\n    })\n  ]\n})\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":" accepts "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/configuration/options#options","rel":["nofollow"]},"children":[{"type":"text","value":"all options that NextAuth.js accepts for its API initialization"}]},{"type":"text","value":". Use this place to configure authentication providers (oauth-google, credential flow, ...), your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":" (equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_SECRET"}]},{"type":"text","value":" in NextAuth.js), add callbacks for authentication events, configure a custom logger and more. Read the linked "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":" configuration to figure out how this works and what you can do."}]}]},"toc":false,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxtauthhandler"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After setting up nuxt-auth inside your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-config.ts"}]},{"type":"text","value":" you can begin defining providers and other options inside your NuxtAuthHandler."}]},{"type":"element","tag":"h2","props":{"id":"creating-a-new-nuxtauthhandler"},"children":[{"type":"text","value":"Creating a new NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to create your own "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHanlder"}]},{"type":"text","value":", create the file "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"~/server/api/auth/[...].ts"}]},{"type":"text","value":". This file will automatically intercept all\nrequests going to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://localhost/api/auth"}]},{"type":"text","value":" and inject the authentication api. If you wish you can also use a custom api path, however this change will need to be\nreflected in the "},{"type":"element","tag":"a","props":{"href":"/nuxt-auth/configuration/nuxt-config#basepath"},"children":[{"type":"text","value":"basePath"}]},{"type":"text","value":", which is configured in the "},{"type":"element","tag":"a","props":{"href":"/nuxt-auth/configuration/nuxt-config"},"children":[{"type":"text","value":"nuxt-config.ts"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"configuring-your-nuxtauthhandler"},"children":[{"type":"text","value":"Configuring your NuxtAuthHandler"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Use the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler({ ... })"}]},{"type":"text","value":" to configure how the authentication itself behaves:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"import { NuxtAuthHandler } from '#auth'\n    \nexport default NuxtAuthHandler({\n    // your authentication configuration here!\n})\n","filename":"Simple NuxtAuthHandler","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"    "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c5fef2"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// your authentication configuration here!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"import CredentialsProvider from 'next-auth/providers/credentials'\nimport GithubProvider from 'next-auth/providers/github'\nimport { NuxtAuthHandler } from '#auth'\n\nexport default NuxtAuthHandler({\n  // A secret string you define, to ensure correct encryption  \n  secret: 'your-secret-here',  \n  providers: [\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    GithubProvider.default({\n      clientId: 'your-client-id',\n      clientSecret: 'your-client-secret'\n    }),\n    // @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point\n    CredentialsProvider.default({\n      // The name to display on the sign in form (e.g. 'Sign in with...')\n      name: 'Credentials',\n      // The credentials is used to generate a suitable form on the sign in page.\n      // You can specify whatever fields you are expecting to be submitted.\n      // e.g. domain, username, password, 2FA token, etc.\n      // You can pass any HTML attribute to the <input> tag through the object.\n      credentials: {\n        username: { label: 'Username', type: 'text', placeholder: '(hint: jsmith)' },\n        password: { label: 'Password', type: 'password', placeholder: '(hint: hunter2)' }\n      },\n      authorize (credentials: any) {\n        // You need to provide your own logic here that takes the credentials\n        // submitted and returns either a object representing a user or value\n        // that is false/null if the credentials are invalid.\n        // NOTE: THE BELOW LOGIC IS NOT SAFE OR PROPER FOR AUTHENTICATION!\n\n        const user = { id: '1', name: 'J Smith', username: 'jsmith', password: 'hunter2' }\n\n        if (credentials?.username === user.username && credentials?.password === user.password) {\n          // Any object returned will be saved in `user` property of the JWT\n          return user\n        } else {\n          // eslint-disable-next-line no-console\n          console.error('Warning: Malicious login attempt registered, bad credentials provided')\n\n          // If you return null then an error will be displayed advising the user to check their details.\n          return null\n\n          // You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter\n        }\n      }\n    })\n  ]\n})\n","filename":"Full NuxtAuthHandler","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"CredentialsProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'next-auth/providers/credentials'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"GithubProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'next-auth/providers/github'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c5fef2"},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// A secret string you define, to ensure correct encryption  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"secret"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'your-secret-here'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":",  "}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"providers"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": ["}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"GithubProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c5fef2"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"clientId"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'your-client-id'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"clientSecret"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'your-client-secret'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"    }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// @ts-ignore Import is exported on .default during SSR, so we need to call it this way. May be fixed via Vite at some point"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"CredentialsProvider"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c5fef2"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// The name to display on the sign in form (e.g. 'Sign in with...')"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'Credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// The credentials is used to generate a suitable form on the sign in page."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// You can specify whatever fields you are expecting to be submitted."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// e.g. domain, username, password, 2FA token, etc."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// You can pass any HTML attribute to the <input> tag through the object."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"credentials"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": { "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"label"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'Username'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'text'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"placeholder"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'(hint: jsmith)'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": { "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"label"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'Password'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'password'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"placeholder"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'(hint: hunter2)'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-c5fef2"},"children":[{"type":"text","value":"authorize"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"credentials"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// You need to provide your own logic here that takes the credentials"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// submitted and returns either a object representing a user or value"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// that is false/null if the credentials are invalid."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// NOTE: THE BELOW LOGIC IS NOT SAFE OR PROPER FOR AUTHENTICATION!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6bbc6"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'1'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'J Smith'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'jsmith'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'hunter2'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"credentials"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6bbc6"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6bbc6"},"children":[{"type":"text","value":"&&"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"credentials"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"?."}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c6bbc6"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// Any object returned will be saved in `user` property of the JWT"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8ca8fa"},"children":[{"type":"text","value":"user"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        } "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// eslint-disable-next-line no-console"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-93dbbc"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c5fef2"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-34960d"},"children":[{"type":"text","value":"'Warning: Malicious login attempt registered, bad credentials provided'"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// If you return null then an error will be displayed advising the user to check their details."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-ab130d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-32d516"},"children":[{"type":"text","value":"null"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-1c8cdf"},"children":[{"type":"text","value":"// You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"      }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"    })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"  ]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-30b62d"},"children":[{"type":"text","value":"})"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NuxtAuthHandler"}]},{"type":"text","value":" accepts "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/configuration/options#options","rel":["nofollow"]},"children":[{"type":"text","value":"all options that NextAuth.js accepts for its API initialization"}]},{"type":"text","value":". Use this place to configure authentication providers (oauth-google, credential flow, ...), your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":" (equivalent to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NEXTAUTH_SECRET"}]},{"type":"text","value":" in NextAuth.js), add callbacks for authentication events, configure a custom logger and more. Read the linked "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth.js"}]},{"type":"text","value":" configuration to figure out how this works and what you can do."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-32d516{color:#D19A66}.ct-c6bbc6{color:#56B6C2}.ct-93dbbc{color:#E5C07B}.ct-1c8cdf{color:#7F848E}.ct-c5fef2{color:#61AFEF}.ct-34960d{color:#98C379}.ct-8ca8fa{color:#E06C75}.ct-30b62d{color:#ABB2BF}.ct-ab130d{color:#C678DD}"}]}]},"_type":"markdown","_id":"content:3.nuxt-session:2.configuration:2.nuxt-auth-handler.md","_source":"content","_file":"3.nuxt-session/2.configuration/2.nuxt-auth-handler.md","_extension":"md"},{"_path":"/nuxt-session/providers/_dir","_dir":"providers","_draft":false,"_partial":true,"_locale":"en","title":"Providers","icon":"heroicons-outline:user-group","_id":"content:3.nuxt-session:3.providers:_dir.yml","_type":"yaml","_source":"content","_file":"3.nuxt-session/3.providers/_dir.yml","_extension":"yml"},{"_path":"/nuxt-session/providers","_dir":"nuxt-session","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Providers","description":"We are currently working on adding more examples of providers using nuxt-auth. In the meantime you can view the official provider documentation by NextAuth here.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"providers"},"children":[{"type":"text","value":"Providers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are currently working on adding more examples of providers using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":". In the meantime you can view the official provider documentation by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/providers/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"providers"},"children":[{"type":"text","value":"Providers"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We are currently working on adding more examples of providers using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":". In the meantime you can view the official provider documentation by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NextAuth"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/providers/","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:3.providers:index.md","_source":"content","_file":"3.nuxt-session/3.providers/index.md","_extension":"md"},{"_path":"/nuxt-session/examples/_dir","_dir":"examples","_draft":false,"_partial":true,"_locale":"en","title":"Examples","icon":"heroicons-outline:play","_id":"content:3.nuxt-session:4.examples:_dir.yml","_type":"yaml","_source":"content","_file":"3.nuxt-session/4.examples/_dir.yml","_extension":"yml"},{"_path":"/nuxt-session/examples/simple","_dir":"examples","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Simple","description":"Minimal example of using nuxt-auth.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"basic-nuxt-auth-example"},"children":[{"type":"text","value":"Basic nuxt-auth example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Minimal example of using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":"."}]},{"type":"element","tag":"read-more","props":{"link":"/get-started"},"children":[]},{"type":"element","tag":"sandbox","props":{"branch":"main","dir":"playground","file":"app.vue","repo":"sidebase/nuxt-auth"},"children":[]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"basic-nuxt-auth-example"},"children":[{"type":"text","value":"Basic nuxt-auth example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Minimal example of using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":"."}]},{"type":"element","tag":"read-more","props":{"link":"/get-started"},"children":[]},{"type":"element","tag":"sandbox","props":{"branch":"main","dir":"playground","file":"app.vue","repo":"sidebase/nuxt-auth"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:4.examples:0.simple.md","_source":"content","_file":"3.nuxt-session/4.examples/0.simple.md","_extension":"md"},{"_path":"/nuxt-session/examples/advanced","_dir":"examples","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Advanced","description":"Advanced example of using nuxt-auth.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"advanced-nuxt-auth-example"},"children":[{"type":"text","value":"Advanced nuxt-auth example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Advanced example of using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":"."}]},{"type":"element","tag":"read-more","props":{"link":"/get-started"},"children":[]},{"type":"element","tag":"sandbox","props":{"branch":"main","dir":"/","file":"app.vue","repo":"sidebase/nuxt-auth-example"},"children":[]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"advanced-nuxt-auth-example"},"children":[{"type":"text","value":"Advanced nuxt-auth example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Advanced example of using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":"."}]},{"type":"element","tag":"read-more","props":{"link":"/get-started"},"children":[]},{"type":"element","tag":"sandbox","props":{"branch":"main","dir":"/","file":"app.vue","repo":"sidebase/nuxt-auth-example"},"children":[]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:4.examples:1.advanced.md","_source":"content","_file":"3.nuxt-session/4.examples/1.advanced.md","_extension":"md"},{"_path":"/nuxt-session/usage/_dir","_dir":"usage","_draft":false,"_partial":true,"_locale":"en","title":"Usage","icon":"heroicons-outline:computer-desktop","_id":"content:3.nuxt-session:5.usage:_dir.yml","_type":"yaml","_source":"content","_file":"3.nuxt-session/5.usage/_dir.yml","_extension":"yml"},{"_path":"/nuxt-session/usage","_dir":"nuxt-session","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Application side","description":"This module allows you user-data access, signing in, signing out and more via useSession. It also allows you to defined middleware that protects pages.","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"application-side-usage"},"children":[{"type":"text","value":"Application-side usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This module allows you user-data access, signing in, signing out and more "},{"type":"element","tag":"a","props":{"href":"#session-access-and-manipulation"},"children":[{"type":"text","value":"via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]}]},{"type":"text","value":". It also allows you to defined "},{"type":"element","tag":"a","props":{"href":"#middleware"},"children":[{"type":"text","value":"middleware that protects pages"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application-side usage refers to any code like pages, components or composables that are part of the universal server- and client-side rendering of Nuxt, see more in the "},{"type":"element","tag":"a","props":{"href":"#glossary"},"children":[{"type":"text","value":"glossary"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"session-access-and-manipulation"},"children":[{"type":"text","value":"Session access and manipulation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" composable is your main gateway to accessing and manipulating session-state and data. Here's the main methdos you can use:"}]},{"type":"element","tag":"code","props":{"code":"const {\n  status,\n  data,\n  getCsrfToken,\n  getProviders,\n  getSession,\n  signIn,\n  signOut,\n} = await useSession({\n  // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n  required: true\n})\n\n// Session status, either `unauthenticated`, `loading`, `authenticated`, see https://next-auth.js.org/getting-started/client#signout\nstatus.value\n\n// Session data, either `undefined` (= authentication not attempted), `null` (= user unauthenticated), `loading` (= session loading in progress), see https://next-auth.js.org/getting-started/client#signout\ndata.value\n\n// Get / Reload the current session from the server, pass `{ required: true }` to force a login if no session exists, see https://next-auth.js.org/getting-started/client#getsession\nawait getSession()\n\n// Get the current CSRF token, usually you do not need this function, see https://next-auth.js.org/getting-started/client#signout\nawait getCsrfToken()\n\n// Get the supported providers, e.g., to build your own login page, see https://next-auth.js.org/getting-started/client#getproviders\nawait getProviders()\n\n// Trigger a sign in, see https://next-auth.js.org/getting-started/client#signin\nawait signIn()\n\n// Trigger a sign in with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn(undefined, { callbackUrl: '/protected' })\n\n// Trigger a sign in via a specific authentication provider with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn('github', { callbackUrl: '/protected' })\n\n// Trigger a sign in with username and password already passed, e.g., from your own custom-made sign-in form\nawait singIn('credentials', { username: 'jsmith', password: 'hunter2' })\n\n// Trigger a sign out, see https://next-auth.js.org/getting-started/client#signout\nawait signOut()\n\n// Trigger a sign out and send the user to the sign out page afterwards\nawait signOut({ calbackUrl: '/signout' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const {\n  status,\n  data,\n  getCsrfToken,\n  getProviders,\n  getSession,\n  signIn,\n  signOut,\n} = await useSession({\n  // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n  required: true\n})\n\n// Session status, either `unauthenticated`, `loading`, `authenticated`, see https://next-auth.js.org/getting-started/client#signout\nstatus.value\n\n// Session data, either `undefined` (= authentication not attempted), `null` (= user unauthenticated), `loading` (= session loading in progress), see https://next-auth.js.org/getting-started/client#signout\ndata.value\n\n// Get / Reload the current session from the server, pass `{ required: true }` to force a login if no session exists, see https://next-auth.js.org/getting-started/client#getsession\nawait getSession()\n\n// Get the current CSRF token, usually you do not need this function, see https://next-auth.js.org/getting-started/client#signout\nawait getCsrfToken()\n\n// Get the supported providers, e.g., to build your own login page, see https://next-auth.js.org/getting-started/client#getproviders\nawait getProviders()\n\n// Trigger a sign in, see https://next-auth.js.org/getting-started/client#signin\nawait signIn()\n\n// Trigger a sign in with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn(undefined, { callbackUrl: '/protected' })\n\n// Trigger a sign in via a specific authentication provider with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn('github', { callbackUrl: '/protected' })\n\n// Trigger a sign in with username and password already passed, e.g., from your own custom-made sign-in form\nawait singIn('credentials', { username: 'jsmith', password: 'hunter2' })\n\n// Trigger a sign out, see https://next-auth.js.org/getting-started/client#signout\nawait signOut()\n\n// Trigger a sign out and send the user to the sign out page afterwards\nawait signOut({ calbackUrl: '/signout' })\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Session "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":" has the following interface:"}]},{"type":"element","tag":"code","props":{"code":"interface DefaultSession {\n  user?: {\n    name?: string | null;\n    email?: string | null;\n    image?: string | null;\n  };\n  expires: ISODateString;\n}\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"interface DefaultSession {\n  user?: {\n    name?: string | null;\n    email?: string | null;\n    image?: string | null;\n  };\n  expires: ISODateString;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that this is only set when the use is logged-in and when the provider used to login the user provides the fields."}]},{"type":"element","tag":"h3","props":{"id":"redirects"},"children":[{"type":"text","value":"Redirects"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also pass the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" option to both the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signIn"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signOut"}]},{"type":"text","value":" method. This allows you to redirect a user to a certain pages, after they've completed the action. This can be useful when a user attempts to open a page ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/protected"}]},{"type":"text","value":") but has to go through external authentication (e.g., via their google account) first."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use it like:"}]},{"type":"element","tag":"code","props":{"code":"await signIn({ callbackUrl: '/protected' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"await signIn({ callbackUrl: '/protected' })\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"to redirect the user to the protected page they wanted to access "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"after"}]},{"type":"text","value":" they've been authenticated."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can do the same for signing out the user:"}]},{"type":"element","tag":"code","props":{"code":"await signOut({ callbackUrl: '/protected' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"await signOut({ callbackUrl: '/protected' })\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"E.g., here to redirect the user away from the already loaded, protected, page after signout (else, you will have to handle the redirect yourself)."}]},{"type":"element","tag":"h3","props":{"id":"custom-sign-in-page"},"children":[{"type":"text","value":"Custom sign in page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To create your custom sign-in page you can use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signIn"}]},{"type":"text","value":" to directly start a provider-flow once the user selected it, e.g., by clicking on a button on your custom sign-in page. Here is a very simple sign-in page that either directly starts a github-oauth sign in flow or directly signs in the user via the credentials flow:"}]},{"type":"element","tag":"code","props":{"code":"<template>\n  <div>\n    <p>Sign In Options</p>\n    <button @click=\"signIn('github')\">Github</button>\n    <!-- NOTE: Here we hard-coded username and password, on your own page this should probably be connected to two inputs for username + password -->\n    <button @click=\"signIn('credentials', { username: 'test', password: 'hunter2' })\">Username and Password</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { signIn } = await useSession({ required: false })\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<template>\n  <div>\n    <p>Sign In Options</p>\n    <button @click=\"signIn('github')\">Github</button>\n    <!-- NOTE: Here we hard-coded username and password, on your own page this should probably be connected to two inputs for username + password -->\n    <button @click=\"signIn('credentials', { username: 'test', password: 'hunter2' })\">Username and Password</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { signIn } = await useSession({ required: false })\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: In the above example "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"username"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" are hard-coded. In your own custom page, these two fields should probably come from inputs on your page."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to create a custom sign-in page that dynamically offers sign-in options based on your configured providers, you can call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getProviders()"}]},{"type":"text","value":" first and then iterate over the supported providers to generate your sign in page."}]},{"type":"element","tag":"h2","props":{"id":"middleware"},"children":[{"type":"text","value":"Middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use this library to define application middleware. This library supports all of "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/middleware#middleware-directory","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt's supported middleware approaches"}]},{"type":"text","value":". In all methods shown below we make use of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" parameter to give the best user experience: If the user is not authenticated, they are forced to login, but will be redirected to the same page they wanted to visit after they successfully logged in. Without a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" parameter, the user would be directed to the index page "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"global-middleware"},"children":[{"type":"text","value":"Global middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a global authentication middleware that ensures that your user is authenticated no matter which page they visit. Create a file in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"middleware"}]},{"type":"text","value":" directory that has a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".global.ts"}]},{"type":"text","value":" suffix."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It should look like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's it! This middleware will fetch a session and if no active session exists for the current user redirect to the login screen. If you want to write custom redirect logic, you could alter the above code to only apply to specific routes."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here is a global middleware that protects only the routes that start with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/secret/"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  if (to.path.startsWith('/secret/')) {\n    await useSession({ callbackUrl: to.path })\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  if (to.path.startsWith('/secret/')) {\n    await useSession({ callbackUrl: to.path })\n  }\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example of a middleware that redirects to a custom login page:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  // 1. Always allow access to the login page\n  if (to.path === '/login') {\n    return\n  }\n\n  // 2. Otherwise: Check status and redirect to login page\n  const { status } = await useSession({ required: false })\n  if (status.value !== 'authenticated') {\n    navigateTo('/login')\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  // 1. Always allow access to the login page\n  if (to.path === '/login') {\n    return\n  }\n\n  // 2. Otherwise: Check status and redirect to login page\n  const { status } = await useSession({ required: false })\n  if (status.value !== 'authenticated') {\n    navigateTo('/login')\n  }\n})\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"named-middleware"},"children":[{"type":"text","value":"Named middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Named middleware behave similar to "},{"type":"element","tag":"a","props":{"href":"#global-middleware"},"children":[{"type":"text","value":"global middleware"}]},{"type":"text","value":" but are not automatically applied to any pages."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To use them, first create a middleware:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/middleware/auth.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then inside your pages use the middleware with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: ['auth']\n})\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: ['auth']\n})\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" can only be used inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" directory."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt now calls the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth.ts"}]},{"type":"text","value":" middleware on every visit to this page."}]},{"type":"element","tag":"h3","props":{"id":"inline-middleware"},"children":[{"type":"text","value":"Inline middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To define a named middleware, you need to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" as described "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/api/utils/define-page-meta/","rel":["nofollow"]},"children":[{"type":"text","value":"in the nuxt docs"}]},{"type":"text","value":". Then you can just call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" as in the other middleware. Here's an example that would protect just the page itself:"}]},{"type":"element","tag":"code","props":{"code":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: async () => {\n    await useSession({ callbackUrl: '/protected' })\n  }\n})\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: async () => {\n    await useSession({ callbackUrl: '/protected' })\n  }\n})\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" can only be used inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" directory"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"application-side-usage"},"children":[{"type":"text","value":"Application-side usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This module allows you user-data access, signing in, signing out and more "},{"type":"element","tag":"a","props":{"href":"#session-access-and-manipulation"},"children":[{"type":"text","value":"via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]}]},{"type":"text","value":". It also allows you to defined "},{"type":"element","tag":"a","props":{"href":"#middleware"},"children":[{"type":"text","value":"middleware that protects pages"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Application-side usage refers to any code like pages, components or composables that are part of the universal server- and client-side rendering of Nuxt, see more in the "},{"type":"element","tag":"a","props":{"href":"#glossary"},"children":[{"type":"text","value":"glossary"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h2","props":{"id":"session-access-and-manipulation"},"children":[{"type":"text","value":"Session access and manipulation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" composable is your main gateway to accessing and manipulating session-state and data. Here's the main methdos you can use:"}]},{"type":"element","tag":"code","props":{"code":"const {\n  status,\n  data,\n  getCsrfToken,\n  getProviders,\n  getSession,\n  signIn,\n  signOut,\n} = await useSession({\n  // Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists\n  required: true\n})\n\n// Session status, either `unauthenticated`, `loading`, `authenticated`, see https://next-auth.js.org/getting-started/client#signout\nstatus.value\n\n// Session data, either `undefined` (= authentication not attempted), `null` (= user unauthenticated), `loading` (= session loading in progress), see https://next-auth.js.org/getting-started/client#signout\ndata.value\n\n// Get / Reload the current session from the server, pass `{ required: true }` to force a login if no session exists, see https://next-auth.js.org/getting-started/client#getsession\nawait getSession()\n\n// Get the current CSRF token, usually you do not need this function, see https://next-auth.js.org/getting-started/client#signout\nawait getCsrfToken()\n\n// Get the supported providers, e.g., to build your own login page, see https://next-auth.js.org/getting-started/client#getproviders\nawait getProviders()\n\n// Trigger a sign in, see https://next-auth.js.org/getting-started/client#signin\nawait signIn()\n\n// Trigger a sign in with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn(undefined, { callbackUrl: '/protected' })\n\n// Trigger a sign in via a specific authentication provider with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin\nawait signIn('github', { callbackUrl: '/protected' })\n\n// Trigger a sign in with username and password already passed, e.g., from your own custom-made sign-in form\nawait singIn('credentials', { username: 'jsmith', password: 'hunter2' })\n\n// Trigger a sign out, see https://next-auth.js.org/getting-started/client#signout\nawait signOut()\n\n// Trigger a sign out and send the user to the sign out page afterwards\nawait signOut({ calbackUrl: '/signout' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"getCsrfToken"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"getProviders"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"getSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-ff9509"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Whether a session is required. If it is, a redirect to the signin page will happen if no active session exists"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"required"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Session status, either `unauthenticated`, `loading`, `authenticated`, see https://next-auth.js.org/getting-started/client#signout"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"value"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Session data, either `undefined` (= authentication not attempted), `null` (= user unauthenticated), `loading` (= session loading in progress), see https://next-auth.js.org/getting-started/client#signout"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"value"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Get / Reload the current session from the server, pass `{ required: true }` to force a login if no session exists, see https://next-auth.js.org/getting-started/client#getsession"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"getSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Get the current CSRF token, usually you do not need this function, see https://next-auth.js.org/getting-started/client#signout"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"getCsrfToken"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Get the supported providers, e.g., to build your own login page, see https://next-auth.js.org/getting-started/client#getproviders"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"getProviders"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Trigger a sign in, see https://next-auth.js.org/getting-started/client#signin"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Trigger a sign in with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"undefined"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'/protected'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Trigger a sign in via a specific authentication provider with a redirect afterwards, see https://next-auth.js.org/getting-started/client#signin"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'github'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'/protected'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Trigger a sign in with username and password already passed, e.g., from your own custom-made sign-in form"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"singIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'jsmith'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'hunter2'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Trigger a sign out, see https://next-auth.js.org/getting-started/client#signout"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// Trigger a sign out and send the user to the sign out page afterwards"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"calbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'/signout'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Session "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data"}]},{"type":"text","value":" has the following interface:"}]},{"type":"element","tag":"code","props":{"code":"interface DefaultSession {\n  user?: {\n    name?: string | null;\n    email?: string | null;\n    image?: string | null;\n  };\n  expires: ISODateString;\n}\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"interface"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"DefaultSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"email"}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"image"}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"?"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"expires"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"ISODateString"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that this is only set when the use is logged-in and when the provider used to login the user provides the fields."}]},{"type":"element","tag":"h3","props":{"id":"redirects"},"children":[{"type":"text","value":"Redirects"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also pass the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" option to both the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signIn"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signOut"}]},{"type":"text","value":" method. This allows you to redirect a user to a certain pages, after they've completed the action. This can be useful when a user attempts to open a page ("},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/protected"}]},{"type":"text","value":") but has to go through external authentication (e.g., via their google account) first."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use it like:"}]},{"type":"element","tag":"code","props":{"code":"await signIn({ callbackUrl: '/protected' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'/protected'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"to redirect the user to the protected page they wanted to access "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"after"}]},{"type":"text","value":" they've been authenticated."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can do the same for signing out the user:"}]},{"type":"element","tag":"code","props":{"code":"await signOut({ callbackUrl: '/protected' })\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signOut"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'/protected'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"E.g., here to redirect the user away from the already loaded, protected, page after signout (else, you will have to handle the redirect yourself)."}]},{"type":"element","tag":"h3","props":{"id":"custom-sign-in-page"},"children":[{"type":"text","value":"Custom sign in page"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To create your custom sign-in page you can use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"signIn"}]},{"type":"text","value":" to directly start a provider-flow once the user selected it, e.g., by clicking on a button on your custom sign-in page. Here is a very simple sign-in page that either directly starts a github-oauth sign in flow or directly signs in the user via the credentials flow:"}]},{"type":"element","tag":"code","props":{"code":"<template>\n  <div>\n    <p>Sign In Options</p>\n    <button @click=\"signIn('github')\">Github</button>\n    <!-- NOTE: Here we hard-coded username and password, on your own page this should probably be connected to two inputs for username + password -->\n    <button @click=\"signIn('credentials', { username: 'test', password: 'hunter2' })\">Username and Password</button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { signIn } = await useSession({ required: false })\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"Sign"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"In"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"Options"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" @"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"click"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'github'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"Github"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    <!-- "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"NOTE:"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"Here"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"we"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"hard-coded"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"and"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"your"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"own"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"page"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"should"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"probably"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"be"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"connected"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"two"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"inputs"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" + "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" @"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"click"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'credentials'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"username"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'test'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"password"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'hunter2'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"Username"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"and"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"Password"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  </"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"signIn"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ff9509"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"required"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: In the above example "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"username"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"password"}]},{"type":"text","value":" are hard-coded. In your own custom page, these two fields should probably come from inputs on your page."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you want to create a custom sign-in page that dynamically offers sign-in options based on your configured providers, you can call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getProviders()"}]},{"type":"text","value":" first and then iterate over the supported providers to generate your sign in page."}]},{"type":"element","tag":"h2","props":{"id":"middleware"},"children":[{"type":"text","value":"Middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can use this library to define application middleware. This library supports all of "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/middleware#middleware-directory","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt's supported middleware approaches"}]},{"type":"text","value":". In all methods shown below we make use of the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" parameter to give the best user experience: If the user is not authenticated, they are forced to login, but will be redirected to the same page they wanted to visit after they successfully logged in. Without a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"text","value":" parameter, the user would be directed to the index page "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"global-middleware"},"children":[{"type":"text","value":"Global middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a global authentication middleware that ensures that your user is authenticated no matter which page they visit. Create a file in the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"middleware"}]},{"type":"text","value":" directory that has a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".global.ts"}]},{"type":"text","value":" suffix."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It should look like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"That's it! This middleware will fetch a session and if no active session exists for the current user redirect to the login screen. If you want to write custom redirect logic, you could alter the above code to only apply to specific routes."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here is a global middleware that protects only the routes that start with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/secret/"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  if (to.path.startsWith('/secret/')) {\n    await useSession({ callbackUrl: to.path })\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"startsWith"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'/secret/'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":")) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example of a middleware that redirects to a custom login page:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.global.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  // 1. Always allow access to the login page\n  if (to.path === '/login') {\n    return\n  }\n\n  // 2. Otherwise: Check status and redirect to login page\n  const { status } = await useSession({ required: false })\n  if (status.value !== 'authenticated') {\n    navigateTo('/login')\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// file: ~/middleware/auth.global.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// 1. Always allow access to the login page"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ff9509"},"children":[{"type":"text","value":"==="}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'/login'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"return"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// 2. Otherwise: Check status and redirect to login page"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ff9509"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"required"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ff9509"},"children":[{"type":"text","value":"!=="}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'authenticated'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"navigateTo"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'/login'"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"named-middleware"},"children":[{"type":"text","value":"Named middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Named middleware behave similar to "},{"type":"element","tag":"a","props":{"href":"#global-middleware"},"children":[{"type":"text","value":"global middleware"}]},{"type":"text","value":" but are not automatically applied to any pages."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To use them, first create a middleware:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/middleware/auth.ts\nexport default defineNuxtRouteMiddleware(async (to) => {\n  await useSession({ callbackUrl: to.path })\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"// file: ~/middleware/auth.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-776a9d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c49648"},"children":[{"type":"text","value":"useSession"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"callbackUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-767d52"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then inside your pages use the middleware with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: ['auth']\n})\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"<!-- file: ~/pages/protected.vue -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'m a secret!</div>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"</template>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"<script setup lang=\"ts\">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"definePageMeta({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"  middleware: ['"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"auth"}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"']"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"</script>"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" can only be used inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" directory."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt now calls the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"auth.ts"}]},{"type":"text","value":" middleware on every visit to this page."}]},{"type":"element","tag":"h3","props":{"id":"inline-middleware"},"children":[{"type":"text","value":"Inline middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To define a named middleware, you need to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" as described "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/api/utils/define-page-meta/","rel":["nofollow"]},"children":[{"type":"text","value":"in the nuxt docs"}]},{"type":"text","value":". Then you can just call "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" as in the other middleware. Here's an example that would protect just the page itself:"}]},{"type":"element","tag":"code","props":{"code":"<!-- file: ~/pages/protected.vue -->\n<template>\n  <div>I'm a secret!</div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: async () => {\n    await useSession({ callbackUrl: '/protected' })\n  }\n})\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcf7d"},"children":[{"type":"text","value":"<!-- file: ~/pages/protected.vue -->"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-7fd6c0"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"I"}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"'m a secret!</div>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"</template>"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"<script setup lang=\"ts\">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"definePageMeta({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"  middleware: async () => {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"    await useSession({ callbackUrl: '"}]},{"type":"element","tag":"span","props":{"class":"ct-0d1681"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-55f8dd"},"children":[{"type":"text","value":"protected"}]},{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"' })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-aa16d3"},"children":[{"type":"text","value":"</script>"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":" can only be used inside the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" directory"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-aa16d3{color:#98C379}.ct-55f8dd{color:#D19A66}.ct-7fd6c0{color:#E06C75}.ct-cbcf7d{color:#7F848E}.ct-c49648{color:#61AFEF}.ct-ff9509{color:#56B6C2}.ct-767d52{color:#E5C07B}.ct-0d1681{color:#ABB2BF}.ct-776a9d{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"session-access-and-manipulation","depth":2,"text":"Session access and manipulation","children":[{"id":"redirects","depth":3,"text":"Redirects"},{"id":"custom-sign-in-page","depth":3,"text":"Custom sign in page"}]},{"id":"middleware","depth":2,"text":"Middleware","children":[{"id":"global-middleware","depth":3,"text":"Global middleware"},{"id":"named-middleware","depth":3,"text":"Named middleware"},{"id":"inline-middleware","depth":3,"text":"Inline middleware"}]}]}},"_type":"markdown","_id":"content:3.nuxt-session:5.usage:0.index.md","_source":"content","_file":"3.nuxt-session/5.usage/0.index.md","_extension":"md"},{"_path":"/nuxt-session/usage/server-side","_dir":"usage","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Server side","description":"On the server side you can get access to the current session like this:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"server-side-usage"},"children":[{"type":"text","value":"Server-side usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On the server side you can get access to the current session like this:"}]},{"type":"element","tag":"code","props":{"code":"import { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is inspired by "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/tutorials/securing-pages-and-api-routes#securing-api-routes","rel":["nofollow"]},"children":[{"type":"text","value":"the getServerSession"}]},{"type":"text","value":" of NextAuth.js. It also avoids an external, internet call to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET /api/auth/sessions"}]},{"type":"text","value":" endpoint, instead directly calling a pure JS-method."}]},{"type":"element","tag":"h2","props":{"id":"server-side-endpoint-protection"},"children":[{"type":"text","value":"Server-side endpoint protection"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To protect an endpoint with, check the session after fetching it:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/protected.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    return { status: 'unauthenticated!' }\n  }\n  return { status: 'authenticated!' }\n})\n\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/protected.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    return { status: 'unauthenticated!' }\n  }\n  return { status: 'authenticated!' }\n})\n\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"server-side-middleware"},"children":[{"type":"text","value":"Server-side middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also use this in a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#server-middleware","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt server middleware"}]},{"type":"text","value":" to protect multiple pages at once and keep the authentication logic out of your endpoints:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/middleware/auth.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    throw createError({ statusMessage: 'Unauthenticated', statusCode: 403 })\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/middleware/auth.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    throw createError({ statusMessage: 'Unauthenticated', statusCode: 403 })\n  }\n})\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-the-jwt-token"},"children":[{"type":"text","value":"Getting the JWT Token"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Getting the (decoded) JWT token of the current user can be helpful, e.g., to use it to access an external api that requires this token for authentication or authorization."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can get the JWT token that was passed along with the request using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getToken"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const token = await getToken({ event })\n\n  return token || 'no token present'\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const token = await getToken({ event })\n\n  return token || 'no token present'\n})\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The function behaves identical to the "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/tutorials/securing-pages-and-api-routes#using-gettoken","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getToken"}]},{"type":"text","value":" function from NextAuth.js"}]},{"type":"text","value":" with one change: you have to pass in the h3-"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"event"}]},{"type":"text","value":" instead of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"req"}]},{"type":"text","value":". This is due to how cookies can be accessed on h3: not via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"req.cookies"}]},{"type":"text","value":" but rather via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useCookies(event)"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You do not need to pass in any further parameters like "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secureCookie"}]},{"type":"text","value":", ... They are automatically inferred to the values you configured if not set and reading the token will work out of the box. You "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"may"}]},{"type":"text","value":" pass these options, e.g., to get the raw, encoded JWT token you can pass "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"raw: true"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"application-side-jwt-token-access"},"children":[{"type":"text","value":"Application-side JWT token access"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To access the JWT token application-side, e.g., in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".vue"}]},{"type":"text","value":" page, you can create an endpoint like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(event => getToken({ event }))\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(event => getToken({ event }))\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then from your application-side code you can fetch it like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: app.vue\n<template>\n  <div>{{ token || 'no token present, are you logged in?' }}</div>\n</template>\n\n<script setup lang=\"ts\">\nconst headers = useRequestHeaders(['cookie'])\nconst { data: token } = await useFetch('/api/token', { headers: { cookie: headers.cookie } })\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// file: app.vue\n<template>\n  <div>{{ token || 'no token present, are you logged in?' }}</div>\n</template>\n\n<script setup lang=\"ts\">\nconst headers = useRequestHeaders(['cookie'])\nconst { data: token } = await useFetch('/api/token', { headers: { cookie: headers.cookie } })\n</script>\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that you have to pass the cookie-header manually. You also have to pass it using "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/api/composables/use-request-headers/","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useRequestHeaders"}]}]},{"type":"text","value":" so that the cookies are also correctly passed when this page is rendered server-side during the "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/concepts/rendering#universal-rendering","rel":["nofollow"]},"children":[{"type":"text","value":"universal-rendering process"}]},{"type":"text","value":"."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"server-side-usage"},"children":[{"type":"text","value":"Server-side usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"On the server side you can get access to the current session like this:"}]},{"type":"element","tag":"code","props":{"code":"import { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a740b1"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is inspired by "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/tutorials/securing-pages-and-api-routes#securing-api-routes","rel":["nofollow"]},"children":[{"type":"text","value":"the getServerSession"}]},{"type":"text","value":" of NextAuth.js. It also avoids an external, internet call to the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET /api/auth/sessions"}]},{"type":"text","value":" endpoint, instead directly calling a pure JS-method."}]},{"type":"element","tag":"h2","props":{"id":"server-side-endpoint-protection"},"children":[{"type":"text","value":"Server-side endpoint protection"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To protect an endpoint with, check the session after fetching it:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/protected.get.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    return { status: 'unauthenticated!' }\n  }\n  return { status: 'authenticated!' }\n})\n\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-34d6ac"},"children":[{"type":"text","value":"// file: ~/server/api/protected.get.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a740b1"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'unauthenticated!'"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'authenticated!'"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"server-side-middleware"},"children":[{"type":"text","value":"Server-side middleware"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can also use this in a "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/directory-structure/server#server-middleware","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt server middleware"}]},{"type":"text","value":" to protect multiple pages at once and keep the authentication logic out of your endpoints:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/middleware/auth.ts\nimport { getServerSession } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const session = await getServerSession(event)\n  if (!session) {\n    throw createError({ statusMessage: 'Unauthenticated', statusCode: 403 })\n  }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-34d6ac"},"children":[{"type":"text","value":"// file: ~/server/middleware/auth.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a740b1"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"getServerSession"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"session"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"createError"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"statusMessage"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'Unauthenticated'"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"statusCode"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-b0610e"},"children":[{"type":"text","value":"403"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"getting-the-jwt-token"},"children":[{"type":"text","value":"Getting the JWT Token"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Getting the (decoded) JWT token of the current user can be helpful, e.g., to use it to access an external api that requires this token for authentication or authorization."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can get the JWT token that was passed along with the request using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getToken"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(async (event) => {\n  const token = await getToken({ event })\n\n  return token || 'no token present'\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-34d6ac"},"children":[{"type":"text","value":"// file: ~/server/api/token.get.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a740b1"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'no token present'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The function behaves identical to the "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/tutorials/securing-pages-and-api-routes#using-gettoken","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"getToken"}]},{"type":"text","value":" function from NextAuth.js"}]},{"type":"text","value":" with one change: you have to pass in the h3-"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"event"}]},{"type":"text","value":" instead of "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"req"}]},{"type":"text","value":". This is due to how cookies can be accessed on h3: not via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"req.cookies"}]},{"type":"text","value":" but rather via "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useCookies(event)"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You do not need to pass in any further parameters like "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secret"}]},{"type":"text","value":", "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"secureCookie"}]},{"type":"text","value":", ... They are automatically inferred to the values you configured if not set and reading the token will work out of the box. You "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"may"}]},{"type":"text","value":" pass these options, e.g., to get the raw, encoded JWT token you can pass "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"raw: true"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"application-side-jwt-token-access"},"children":[{"type":"text","value":"Application-side JWT token access"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To access the JWT token application-side, e.g., in a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":".vue"}]},{"type":"text","value":" page, you can create an endpoint like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: ~/server/api/token.get.ts\nimport { getToken } from '#auth'\n\nexport default eventHandler(event => getToken({ event }))\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-34d6ac"},"children":[{"type":"text","value":"// file: ~/server/api/token.get.ts"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'#auth'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"eventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"getToken"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" }))"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then from your application-side code you can fetch it like this:"}]},{"type":"element","tag":"code","props":{"code":"// file: app.vue\n<template>\n  <div>{{ token || 'no token present, are you logged in?' }}</div>\n</template>\n\n<script setup lang=\"ts\">\nconst headers = useRequestHeaders(['cookie'])\nconst { data: token } = await useFetch('/api/token', { headers: { cookie: headers.cookie } })\n</script>\n","language":"vue"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"// file: app.vue"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-b0610e"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":">{{ "}]},{"type":"element","tag":"span","props":{"class":"ct-b0610e"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" || "}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'no token present, are you logged in?'"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-b0610e"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b0610e"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b0610e"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a740b1"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"useRequestHeaders"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'cookie'"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"])"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a740b1"},"children":[{"type":"text","value":"token"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-b74b97"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-2e1f4d"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a12d7c"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8168e5"},"children":[{"type":"text","value":"'/api/token'"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":", { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":": { "}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"cookie"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a740b1"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"cookie"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":" } })"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-13947a"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-599ef9"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note that you have to pass the cookie-header manually. You also have to pass it using "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/api/composables/use-request-headers/","rel":["nofollow"]},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useRequestHeaders"}]}]},{"type":"text","value":" so that the cookies are also correctly passed when this page is rendered server-side during the "},{"type":"element","tag":"a","props":{"href":"https://v3.nuxtjs.org/guide/concepts/rendering#universal-rendering","rel":["nofollow"]},"children":[{"type":"text","value":"universal-rendering process"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-b0610e{color:#D19A66}.ct-34d6ac{color:#7F848E}.ct-b74b97{color:#56B6C2}.ct-a740b1{color:#E5C07B}.ct-a12d7c{color:#61AFEF}.ct-8168e5{color:#98C379}.ct-13947a{color:#E06C75}.ct-599ef9{color:#ABB2BF}.ct-2e1f4d{color:#C678DD}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"server-side-endpoint-protection","depth":2,"text":"Server-side endpoint protection"},{"id":"server-side-middleware","depth":2,"text":"Server-side middleware"},{"id":"getting-the-jwt-token","depth":2,"text":"Getting the JWT Token","children":[{"id":"application-side-jwt-token-access","depth":3,"text":"Application-side JWT token access"}]}]}},"_type":"markdown","_id":"content:3.nuxt-session:5.usage:1.server-side.md","_source":"content","_file":"3.nuxt-session/5.usage/1.server-side.md","_extension":"md"},{"_path":"/nuxt-session/usage/rest-api","_dir":"usage","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"REST API","description":"All endpoints that NextAuth.js supports are also supported by nuxt-auth:","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rest-api"},"children":[{"type":"text","value":"REST API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All endpoints that NextAuth.js supports are also supported by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":":"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Request"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signin/:provider"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/callback/:provider"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signout"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/session"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/csrf"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/providers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can directly interact with them if you wish to, it's probably a better idea to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" where possible though. "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/getting-started/rest-api","rel":["nofollow"]},"children":[{"type":"text","value":"See the full rest API documentation of NextAuth.js here"}]},{"type":"text","value":"."}]}]},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"rest-api"},"children":[{"type":"text","value":"REST API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"All endpoints that NextAuth.js supports are also supported by "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-auth"}]},{"type":"text","value":":"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Endpoint"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Request"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signin"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signin/:provider"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/callback/:provider"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/signout"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]},{"type":"text","value":" "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"POST"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/session"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/csrf"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":":basePath/providers"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"GET"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can directly interact with them if you wish to, it's probably a better idea to use "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"useSession"}]},{"type":"text","value":" where possible though. "},{"type":"element","tag":"a","props":{"href":"https://next-auth.js.org/getting-started/rest-api","rel":["nofollow"]},"children":[{"type":"text","value":"See the full rest API documentation of NextAuth.js here"}]},{"type":"text","value":"."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:3.nuxt-session:5.usage:2.REST-API.md","_source":"content","_file":"3.nuxt-session/5.usage/2.REST-API.md","_extension":"md"},{"_path":"/nuxt-parse/_dir","_dir":"nuxt-parse","_draft":false,"_partial":true,"_locale":"en","title":"nuxt-parse","icon":"heroicons-outline:clipboard-document-list","_id":"content:4.nuxt-parse:_dir.yml","_type":"yaml","_source":"content","_file":"4.nuxt-parse/_dir.yml","_extension":"yml"},{"_path":"/nuxt-parse","_dir":"","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"nuxt-parse documentation","description":"","excerpt":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxt-parse-documentation"},"children":[{"type":"text","value":"nuxt-parse documentation"}]},{"type":"element","tag":"h2","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting started"}]},{"type":"element","tag":"h3","props":{"id":"install-the-package"},"children":[{"type":"text","value":"Install the package"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"npm i @sidebase/nuxt-parse\n","filename":"NPM","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"npm i @sidebase/nuxt-parse\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn add @sidebase/nuxt-parse\n","filename":"Yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"yarn add @sidebase/nuxt-parse\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After installing the package you can begin using it in your code. You can find some examples below."}]},{"type":"element","tag":"h3","props":{"id":"make-an-arbitrary-parser-eg-to-deserialize-data-from-an-api"},"children":[{"type":"text","value":"Make an arbitrary parser, e.g., to deserialize data from an API:"}]},{"type":"element","tag":"h4","props":{"id":"example-with-valid-data"},"children":[{"type":"text","value":"Example with valid data"}]},{"type":"element","tag":"code","props":{"code":"import { z, makeParser } from \"@sidebase/nuxt-parse\"\n\n// Define the expected response schema\nconst responseSchema = z.object({\n    uuid: z.string().uuid(),\n})\n\n// Perform the request, use `makeParse` to pass a transformer for the data\nconst { data, error } = await useFetch('https://httpbin.org/uuid', {\n    transform: makeParser(responseSchema),\n})\n\nconsole.log(`data is ${data.value}`)\n// -> `data is {\"uuid\":\"f8df921c-d7f3-43c1-ac9b-3cf5d4da2f7b\"}`\n\nconsole.log(`error is ${error.value}`)\n// -> `error is false`\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { z, makeParser } from \"@sidebase/nuxt-parse\"\n\n// Define the expected response schema\nconst responseSchema = z.object({\n    uuid: z.string().uuid(),\n})\n\n// Perform the request, use `makeParse` to pass a transformer for the data\nconst { data, error } = await useFetch('https://httpbin.org/uuid', {\n    transform: makeParser(responseSchema),\n})\n\nconsole.log(`data is ${data.value}`)\n// -> `data is {\"uuid\":\"f8df921c-d7f3-43c1-ac9b-3cf5d4da2f7b\"}`\n\nconsole.log(`error is ${error.value}`)\n// -> `error is false`\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"example-with-invalid-data"},"children":[{"type":"text","value":"Example with invalid data"}]},{"type":"element","tag":"code","props":{"code":"import { z, makeParser } from \"@sidebase/nuxt-parse\"\n\n// Define the expected response schema\nconst responseSchema = z.object({\n    uuid: z.string().uuid(),\n})\n\n// Perform the request, use `makeParse` to pass a transformer for the data\nconst { data, error } = await useFetch('https://httpbin.org/ip', {\n    transform: makeParser(responseSchema),\n})\n\nconsole.log(`data is ${data.value}`)\n// -> `data is null`\n\nconsole.log(`error is ${error.value}`)\n// -> `error is true`\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { z, makeParser } from \"@sidebase/nuxt-parse\"\n\n// Define the expected response schema\nconst responseSchema = z.object({\n    uuid: z.string().uuid(),\n})\n\n// Perform the request, use `makeParse` to pass a transformer for the data\nconst { data, error } = await useFetch('https://httpbin.org/ip', {\n    transform: makeParser(responseSchema),\n})\n\nconsole.log(`data is ${data.value}`)\n// -> `data is null`\n\nconsole.log(`error is ${error.value}`)\n// -> `error is true`\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"handle-user-data-in-an-endpoint"},"children":[{"type":"text","value":"Handle user data in an endpoint"}]},{"type":"element","tag":"code","props":{"code":"import { defineEventHandler } from 'h3'\nimport type { CompatibilityEvent } from 'h3'\nimport { z, parseParamsAs, parseBodyAs } from \"@sidebase/nuxt-parse\"\n\n// Define the schema of the parameters you expect the user to provide you with\nconst paramsSchema = z.object({\n    id: z.string().uuid(),\n})\n\n// Define the schema of the body you expect the user to provide you with\nconst bodySchema = z.object({\n    name: z.string(),\n    age: z.number()\n})\n\n// Get a nice type to use throughout your code and components\ntype RequestBody = z.infer<typeof bodySchema>\n\nexport default defineEventHandler(async (event: CompatibilityEvent) => {\n    // Validate and then get the parameters\n    // This automatically throws a nice HTTP 422 error with more information if the data is invalid\n    const params = parseParamsAs(event, paramsSchema)\n\n    let body: RequestBody;\n    try {\n        body = parseBodyAs(event, paramsSchema)\n    } catch(error) {\n        // Fallback, this avoids automatic raising + returning of the HTTP 422 error\n        body = {\n            name: 'Bernd',\n            age: 88\n        }\n    }\n\n    // Return the full entity\n    return {\n        id: params.id,\n        ...body\n    }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { defineEventHandler } from 'h3'\nimport type { CompatibilityEvent } from 'h3'\nimport { z, parseParamsAs, parseBodyAs } from \"@sidebase/nuxt-parse\"\n\n// Define the schema of the parameters you expect the user to provide you with\nconst paramsSchema = z.object({\n    id: z.string().uuid(),\n})\n\n// Define the schema of the body you expect the user to provide you with\nconst bodySchema = z.object({\n    name: z.string(),\n    age: z.number()\n})\n\n// Get a nice type to use throughout your code and components\ntype RequestBody = z.infer<typeof bodySchema>\n\nexport default defineEventHandler(async (event: CompatibilityEvent) => {\n    // Validate and then get the parameters\n    // This automatically throws a nice HTTP 422 error with more information if the data is invalid\n    const params = parseParamsAs(event, paramsSchema)\n\n    let body: RequestBody;\n    try {\n        body = parseBodyAs(event, paramsSchema)\n    } catch(error) {\n        // Fallback, this avoids automatic raising + returning of the HTTP 422 error\n        body = {\n            name: 'Bernd',\n            age: 88\n        }\n    }\n\n    // Return the full entity\n    return {\n        id: params.id,\n        ...body\n    }\n})\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"parse-any-data"},"children":[{"type":"text","value":"Parse any data"}]},{"type":"element","tag":"code","props":{"code":"import { z, parseDataAs } from \"@sidebase/nuxt-parse\"\n\nconst parsedData = await parseDataAs({ test: \"1\" }, z.object({ test: z.number() )}))\n// -> throws! `\"1\"` is not a number, but a string!\n\nconst parsedData = await parseDataAs({ test: 1 }, z.object({ test: z.number() )}))\nconsole.log(parsedData)\n// -> output: `{ test: 1 }`\n\n\nconst parsedData = await parseDataAs({ test: \"1\" }, z.object({ test: z.string().transform(v => parseInt(v)) )}))\nconsole.log(parsedData)\n// -> output: `{ test: 1 }` (we used `.transform` to ensure that we get a number)\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { z, parseDataAs } from \"@sidebase/nuxt-parse\"\n\nconst parsedData = await parseDataAs({ test: \"1\" }, z.object({ test: z.number() )}))\n// -> throws! `\"1\"` is not a number, but a string!\n\nconst parsedData = await parseDataAs({ test: 1 }, z.object({ test: z.number() )}))\nconsole.log(parsedData)\n// -> output: `{ test: 1 }`\n\n\nconst parsedData = await parseDataAs({ test: \"1\" }, z.object({ test: z.string().transform(v => parseInt(v)) )}))\nconsole.log(parsedData)\n// -> output: `{ test: 1 }` (we used `.transform` to ensure that we get a number)\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"async-data-example"},"children":[{"type":"text","value":"Async data example"}]},{"type":"element","tag":"code","props":{"code":"import { z, parseDataAs } from \"@sidebase/nuxt-parse\"\n\nconst fakeDatabaseQuery = async () => { id: 1 }\nconst parsedData = await parseDataAs(fakeDatabaseQuery, z.object({ id: z.number() )}))\n\nconsole.log(parsedData)\n// -> output: `1`\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"import { z, parseDataAs } from \"@sidebase/nuxt-parse\"\n\nconst fakeDatabaseQuery = async () => { id: 1 }\nconst parsedData = await parseDataAs(fakeDatabaseQuery, z.object({ id: z.number() )}))\n\nconsole.log(parsedData)\n// -> output: `1`\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"exports"},"children":[{"type":"text","value":"Exports"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Function"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Usage"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseBodyAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse body of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseParamsAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse params of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseQueryAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse query of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseCookieAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse cookies of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseHeaderAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse header of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseDataAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse sync or async data"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"makeParser"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Make your own parser (see example above)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"z"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/colinhacks/zod","rel":["nofollow"]},"children":[{"type":"text","value":"zod"}]},{"type":"text","value":", the library used for parsing"}]}]}]}]}]},"aside":false,"bottom":false,"toc":true,"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"nuxt-parse-documentation"},"children":[{"type":"text","value":"nuxt-parse documentation"}]},{"type":"element","tag":"h2","props":{"id":"getting-started"},"children":[{"type":"text","value":"Getting started"}]},{"type":"element","tag":"h3","props":{"id":"install-the-package"},"children":[{"type":"text","value":"Install the package"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"npm i @sidebase/nuxt-parse\n","filename":"NPM","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"npm i @sidebase/nuxt-parse"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn add @sidebase/nuxt-parse\n","filename":"Yarn","language":"bash"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"yarn add @sidebase/nuxt-parse"}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After installing the package you can begin using it in your code. You can find some examples below."}]},{"type":"element","tag":"h3","props":{"id":"make-an-arbitrary-parser-eg-to-deserialize-data-from-an-api"},"children":[{"type":"text","value":"Make an arbitrary parser, e.g., to deserialize data from an API:"}]},{"type":"element","tag":"h4","props":{"id":"example-with-valid-data"},"children":[{"type":"text","value":"Example with valid data"}]},{"type":"element","tag":"code","props":{"code":"import { z, makeParser } from \"@sidebase/nuxt-parse\"\n\n// Define the expected response schema\nconst responseSchema = z.object({\n    uuid: z.string().uuid(),\n})\n\n// Perform the request, use `makeParse` to pass a transformer for the data\nconst { data, error } = await useFetch('https://httpbin.org/uuid', {\n    transform: makeParser(responseSchema),\n})\n\nconsole.log(`data is ${data.value}`)\n// -> `data is {\"uuid\":\"f8df921c-d7f3-43c1-ac9b-3cf5d4da2f7b\"}`\n\nconsole.log(`error is ${error.value}`)\n// -> `error is false`\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"makeParser"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"\"@sidebase/nuxt-parse\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Define the expected response schema"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"responseSchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"uuid"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"uuid"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Perform the request, use `makeParse` to pass a transformer for the data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"'https://httpbin.org/uuid'"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"makeParser"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"responseSchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"`data is "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// -> `data is {\"uuid\":\"f8df921c-d7f3-43c1-ac9b-3cf5d4da2f7b\"}`"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"`error is "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// -> `error is false`"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"example-with-invalid-data"},"children":[{"type":"text","value":"Example with invalid data"}]},{"type":"element","tag":"code","props":{"code":"import { z, makeParser } from \"@sidebase/nuxt-parse\"\n\n// Define the expected response schema\nconst responseSchema = z.object({\n    uuid: z.string().uuid(),\n})\n\n// Perform the request, use `makeParse` to pass a transformer for the data\nconst { data, error } = await useFetch('https://httpbin.org/ip', {\n    transform: makeParser(responseSchema),\n})\n\nconsole.log(`data is ${data.value}`)\n// -> `data is null`\n\nconsole.log(`error is ${error.value}`)\n// -> `error is true`\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"makeParser"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"\"@sidebase/nuxt-parse\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Define the expected response schema"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"responseSchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"uuid"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"uuid"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Perform the request, use `makeParse` to pass a transformer for the data"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"useFetch"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"'https://httpbin.org/ip'"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"makeParser"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"responseSchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"`data is "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// -> `data is null`"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"`error is "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"value"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// -> `error is true`"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"handle-user-data-in-an-endpoint"},"children":[{"type":"text","value":"Handle user data in an endpoint"}]},{"type":"element","tag":"code","props":{"code":"import { defineEventHandler } from 'h3'\nimport type { CompatibilityEvent } from 'h3'\nimport { z, parseParamsAs, parseBodyAs } from \"@sidebase/nuxt-parse\"\n\n// Define the schema of the parameters you expect the user to provide you with\nconst paramsSchema = z.object({\n    id: z.string().uuid(),\n})\n\n// Define the schema of the body you expect the user to provide you with\nconst bodySchema = z.object({\n    name: z.string(),\n    age: z.number()\n})\n\n// Get a nice type to use throughout your code and components\ntype RequestBody = z.infer<typeof bodySchema>\n\nexport default defineEventHandler(async (event: CompatibilityEvent) => {\n    // Validate and then get the parameters\n    // This automatically throws a nice HTTP 422 error with more information if the data is invalid\n    const params = parseParamsAs(event, paramsSchema)\n\n    let body: RequestBody;\n    try {\n        body = parseBodyAs(event, paramsSchema)\n    } catch(error) {\n        // Fallback, this avoids automatic raising + returning of the HTTP 422 error\n        body = {\n            name: 'Bernd',\n            age: 88\n        }\n    }\n\n    // Return the full entity\n    return {\n        id: params.id,\n        ...body\n    }\n})\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"defineEventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"'h3'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"CompatibilityEvent"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"'h3'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"parseParamsAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"parseBodyAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"\"@sidebase/nuxt-parse\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Define the schema of the parameters you expect the user to provide you with"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"paramsSchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"uuid"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Define the schema of the body you expect the user to provide you with"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"bodySchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"(),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"})"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Get a nice type to use throughout your code and components"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"RequestBody"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"infer"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"typeof"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"bodySchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"defineEventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"CompatibilityEvent"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Validate and then get the parameters"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// This automatically throws a nice HTTP 422 error with more information if the data is invalid"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"params"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"parseParamsAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"paramsSchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"RequestBody"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"parseBodyAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"event"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"paramsSchema"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Fallback, this avoids automatic raising + returning of the HTTP 422 error"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"'Bernd'"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"age"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-11ea8d"},"children":[{"type":"text","value":"88"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// Return the full entity"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"params"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"        ..."}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"body"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"parse-any-data"},"children":[{"type":"text","value":"Parse any data"}]},{"type":"element","tag":"code","props":{"code":"import { z, parseDataAs } from \"@sidebase/nuxt-parse\"\n\nconst parsedData = await parseDataAs({ test: \"1\" }, z.object({ test: z.number() )}))\n// -> throws! `\"1\"` is not a number, but a string!\n\nconst parsedData = await parseDataAs({ test: 1 }, z.object({ test: z.number() )}))\nconsole.log(parsedData)\n// -> output: `{ test: 1 }`\n\n\nconst parsedData = await parseDataAs({ test: \"1\" }, z.object({ test: z.string().transform(v => parseInt(v)) )}))\nconsole.log(parsedData)\n// -> output: `{ test: 1 }` (we used `.transform` to ensure that we get a number)\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"parseDataAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"\"@sidebase/nuxt-parse\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"parsedData"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"parseDataAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"\"1\""}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" }, "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"() )}))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// -> throws! `\"1\"` is not a number, but a string!"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"parsedData"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"parseDataAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-11ea8d"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" }, "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"() )}))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"parsedData"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// -> output: `{ test: 1 }`"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"parsedData"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"parseDataAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"\"1\""}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" }, "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"string"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"transform"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"parseInt"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")) )}))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"parsedData"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// -> output: `{ test: 1 }` (we used `.transform` to ensure that we get a number)"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"async-data-example"},"children":[{"type":"text","value":"Async data example"}]},{"type":"element","tag":"code","props":{"code":"import { z, parseDataAs } from \"@sidebase/nuxt-parse\"\n\nconst fakeDatabaseQuery = async () => { id: 1 }\nconst parsedData = await parseDataAs(fakeDatabaseQuery, z.object({ id: z.number() )}))\n\nconsole.log(parsedData)\n// -> output: `1`\n","language":"ts"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"parseDataAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-8f7ee1"},"children":[{"type":"text","value":"\"@sidebase/nuxt-parse\""}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"fakeDatabaseQuery"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" () "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" { id: "}]},{"type":"element","tag":"span","props":{"class":"ct-11ea8d"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"parsedData"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f88606"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ebc9c4"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"parseDataAs"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"fakeDatabaseQuery"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"object"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"number"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"() )}))"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-a60004"},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-1f8d7a"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cb95fe"},"children":[{"type":"text","value":"parsedData"}]},{"type":"element","tag":"span","props":{"class":"ct-131773"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-01b5c4"},"children":[{"type":"text","value":"// -> output: `1`"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"exports"},"children":[{"type":"text","value":"Exports"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{"align":null},"children":[{"type":"text","value":"Function"}]},{"type":"element","tag":"th","props":{"align":"left"},"children":[{"type":"text","value":"Usage"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseBodyAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse body of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseParamsAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse params of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseQueryAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse query of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseCookieAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse cookies of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseHeaderAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse header of h3 event"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"parseDataAs"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Parse sync or async data"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"makeParser"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"text","value":"Make your own parser (see example above)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{"align":null},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"z"}]}]},{"type":"element","tag":"td","props":{"align":"left"},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/colinhacks/zod","rel":["nofollow"]},"children":[{"type":"text","value":"zod"}]},{"type":"text","value":", the library used for parsing"}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-11ea8d{color:#D19A66}.ct-1f8d7a{color:#61AFEF}.ct-f88606{color:#56B6C2}.ct-a60004{color:#E5C07B}.ct-01b5c4{color:#7F848E}.ct-8f7ee1{color:#98C379}.ct-cb95fe{color:#E06C75}.ct-ebc9c4{color:#C678DD}.ct-131773{color:#ABB2BF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"getting-started","depth":2,"text":"Getting started","children":[{"id":"install-the-package","depth":3,"text":"Install the package"}]},{"id":"usage","depth":2,"text":"Usage","children":[{"id":"make-an-arbitrary-parser-eg-to-deserialize-data-from-an-api","depth":3,"text":"Make an arbitrary parser, e.g., to deserialize data from an API:"},{"id":"handle-user-data-in-an-endpoint","depth":3,"text":"Handle user data in an endpoint"},{"id":"parse-any-data","depth":3,"text":"Parse any data"},{"id":"async-data-example","depth":3,"text":"Async data example"}]},{"id":"exports","depth":2,"text":"Exports"}]}},"_type":"markdown","_id":"content:4.nuxt-parse:1.index.md","_source":"content","_file":"4.nuxt-parse/1.index.md","_extension":"md"},{"_path":"/sidebase","_dir":"","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Welcome","description":"Supercharging the Nuxt3 developer experience with high quality modules and tools!","excerpt":{"type":"root","children":[{"type":"element","tag":"block-hero","props":{":cta":"[\"Visit our homepage\",\"https://sidebase.io\"]",":secondary":"[\"Follow us on GitHub\",\"https://github.com/sidebase\"]"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The new way to code for Nuxt3!"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Supercharging the Nuxt3 developer experience with high quality modules and tools!"}]}]}]},{"type":"element","tag":"card-grid","props":{},"children":[{"type":"element","tag":"card","props":{"icon":"heroicons-outline:lock-closed"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nuxt-auth"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt user authentication and sessions via NextAuth.js."}]}]}]},{"type":"element","tag":"card","props":{"icon":"ph:file"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nuxt-session"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt session middleware to get a persistent session per app user."}]}]}]},{"type":"element","tag":"card","props":{"icon":"ph:funnel"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nuxt-parse"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A nuxt focused package to make data validation and parsing easy."}]}]}]}]}]},"navigation":false,"layout":"page","body":{"type":"root","children":[{"type":"element","tag":"block-hero","props":{":cta":"[\"Visit our homepage\",\"https://sidebase.io\"]",":secondary":"[\"Follow us on GitHub\",\"https://github.com/sidebase\"]"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The new way to code for Nuxt3!"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Supercharging the Nuxt3 developer experience with high quality modules and tools!"}]}]}]},{"type":"element","tag":"card-grid","props":{},"children":[{"type":"element","tag":"card","props":{"icon":"heroicons-outline:lock-closed"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nuxt-auth"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt user authentication and sessions via NextAuth.js."}]}]}]},{"type":"element","tag":"card","props":{"icon":"ph:file"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nuxt-session"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt session middleware to get a persistent session per app user."}]}]}]},{"type":"element","tag":"card","props":{"icon":"ph:funnel"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"nuxt-parse"}]}]},{"type":"element","tag":"template","props":{"v-slot:description":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A nuxt focused package to make data validation and parsing easy."}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:11.sidebase.md","_source":"content","_file":"11.sidebase.md","_extension":"md"}],"navigation":[{"title":"Guide","_path":"/guide","children":[{"title":"","_path":"/guide"},{"title":"Welcome","_path":"/guide/welcome","children":[{"title":"Getting started","_path":"/guide/welcome"},{"title":"Features","_path":"/guide/welcome/features"},{"title":"Demo Page","_path":"/guide/welcome/demo-page"},{"title":"Security","_path":"/guide/welcome/security"}],"icon":"heroicons-outline:sparkles"},{"title":"Configuration","_path":"/guide/configuration","children":[{"title":"Glossary","_path":"/guide/configuration"},{"title":"Nuxt Config","_path":"/guide/configuration/nuxt-config"},{"title":"NuxtAuthHandler","_path":"/guide/configuration/nuxt-auth-handler"}],"icon":"heroicons-outline:cog"},{"title":"Providers","_path":"/guide/providers","children":[{"title":"Overview","_path":"/guide/providers"}],"icon":"heroicons-outline:user-group"},{"title":"Usage","_path":"/guide/usage","children":[{"title":"Application side","_path":"/guide/usage"},{"title":"Server side","_path":"/guide/usage/server-side"},{"title":"REST API","_path":"/guide/usage/rest-api"}],"icon":"heroicons-outline:computer-desktop"},{"title":"Examples","_path":"/guide/examples","children":[{"title":"Simple","_path":"/guide/examples/simple"},{"title":"Advanced","_path":"/guide/examples/advanced"}],"icon":"heroicons-outline:play"}],"icon":"heroicons-outline:book-open"},{"title":"Demo Page","_path":"/demo-page","icon":"heroicons-outline:beaker"},{"title":"nuxt-session","_path":"/nuxt-session","children":[{"title":"Welcome","_path":"/nuxt-session/welcome","children":[{"title":"Getting started","_path":"/nuxt-session/welcome/getting-started"},{"title":"Features","_path":"/nuxt-session/welcome/features"},{"title":"Playground","_path":"/nuxt-session/welcome/playground"}],"icon":"heroicons-outline:bolt"},{"title":"Configuration","_path":"/nuxt-session/configuration","children":[{"title":"Glossary","_path":"/nuxt-session/configuration"},{"title":"Nuxt Config","_path":"/nuxt-session/configuration/nuxt-config"},{"title":"NuxtAuthHandler","_path":"/nuxt-session/configuration/nuxt-auth-handler"}],"icon":"heroicons-outline:cog"},{"title":"Providers","_path":"/nuxt-session/providers","children":[{"title":"Providers","_path":"/nuxt-session/providers"}],"icon":"heroicons-outline:user-group"},{"title":"Examples","_path":"/nuxt-session/examples","children":[{"title":"Simple","_path":"/nuxt-session/examples/simple"},{"title":"Advanced","_path":"/nuxt-session/examples/advanced"}],"icon":"heroicons-outline:play"},{"title":"Usage","_path":"/nuxt-session/usage","children":[{"title":"Application side","_path":"/nuxt-session/usage"},{"title":"Server side","_path":"/nuxt-session/usage/server-side"},{"title":"REST API","_path":"/nuxt-session/usage/rest-api"}],"icon":"heroicons-outline:computer-desktop"}],"icon":"heroicons-outline:document"},{"title":"nuxt-parse","_path":"/nuxt-parse","children":[{"title":"nuxt-parse documentation","_path":"/nuxt-parse"}],"icon":"heroicons-outline:clipboard-document-list"}]}